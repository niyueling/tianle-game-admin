(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7e42d52c"],{"308b":function(e,t,s){"use strict";s.d(t,"f",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"e",(function(){return l})),s.d(t,"c",(function(){return i})),s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return n}));var a=s("f175");const r=e=>a.a.get("/live.LiveRoom/lists",{params:e}),o=e=>a.a.post("/live.LiveRoom/add",e),l=e=>a.a.post("/live.LiveRoom/del",e),i=e=>a.a.get("/live.LiveGoods/lists",{params:e}),c=e=>a.a.post("/live.LiveGoods/add",e),n=e=>a.a.post("/live.LiveGoods/del",e)},4681:function(e,t,s){},"7c1d":function(e,t,s){"use strict";s("4681")},a0f5:function(e,t,s){"use strict";s.r(t);var a=s("9ab4"),r=s("1b40"),o=s("4201"),l=s("b3ad"),i=s("d70b");let c=class extends r.e{constructor(){super(...arguments),this.action=i.a.baseURL+"/adminapi/upload/wechatMaterial",this.version=i.a.version,this.ishide=!1}handleRemove(e,t){this.ishide=!1}handleSuccess(e,t,s){this.$emit("setImage",e.data.media_id),this.ishide=!0}handleError(e,t){this.$message.error(t.name+"文件上传失败")}handleExceed(){this.$message.error("超出上传上限，请重新上传")}};c=Object(a.a)([Object(r.a)({components:{}})],c);var n=c,m=(s("d0a9"),s("2877")),d=Object(m.a)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{},[s("el-upload",{class:e.ishide?"hide":"",attrs:{action:e.action,headers:{token:e.$store.getters.token,version:e.version},"list-type":"picture-card",limit:1,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"on-exceed":e.handleExceed,"on-error":e.handleError}},[s("i",{staticClass:"el-icon-plus"})])],1)}),[],!1,null,"1e66e587",null).exports,u=s("308b"),f=s("6ddb");let p=class extends r.e{constructor(){super(...arguments),this.pickerOptions={shortcuts:[{text:"今天",onClick(e){e.$emit("pick",new Date)}},{text:"昨天",onClick(e){const t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick(e){const t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},this.mode=o.f.ADD,this.form={type:0,name:"",start_time:0,end_time:0,anchor_name:"",anchor_wechat:"",cover_img:"",share_img:"",feeds_img:"",is_feeds_public:0,close_like:0,close_goods:0,close_comment:0,close_replay:0,close_share:0,close_kf:0},this.start="",this.end="",this.formRules={type:[{required:!0,message:"请选择直播类型",trigger:"change"}],name:[{required:!0,message:"请输入直播标题",trigger:"blur"}],start_time:[{required:!0,message:"请选择直播开始时间",trigger:"change"}],end_time:[{required:!0,message:"请选择直播结束时间",trigger:"change"}],anchor_name:[{required:!0,message:"请输入主播昵称",trigger:"blur"}],anchor_wechat:[{required:!0,message:"请输入主播微信号",trigger:"blur"}],cover_img:[{required:!0,message:"请选择直播间背景墙图片",trigger:"blur"}],share_img:[{required:!0,message:"请选择分享卡片封面图片",trigger:"blur"}],feeds_img:[{required:!0,message:"请选择直播卡片封面图片",trigger:"blur"}]}}setCoverImg(e){this.form.cover_img=e}setShareImg(e){this.form.share_img=e}setFeedsImg(e){this.form.feeds_img=e}onSubmit(){this.$refs.formRef.validate(e=>{e&&this.liveRoomAdd()})}liveRoomAdd(){const e=new Date(this.start);this.form.start_time=e.getTime()/1e3;const t=new Date(this.end);this.form.end_time=t.getTime()/1e3,Object(u.d)(this.form).then(e=>{setTimeout(()=>this.$router.go(-1),500)}).catch(e=>{})}created(){this.onSubmit=Object(f.h)(this.onSubmit,1e3)}};p=Object(a.a)([Object(r.a)({components:{MaterialSelect:l.a,LiveUpload:d}})],p);var h=p,v=(s("7c1d"),Object(m.a)(h,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"live-broadcast-edit"},[s("div",{staticClass:"ls-card"},[s("el-page-header",{attrs:{content:"add"===e.mode?"新建直播间":""},on:{back:function(t){return e.$router.go(-1)}}})],1),s("el-form",{ref:"formRef",attrs:{rules:e.formRules,model:e.form,"label-width":"120px",size:"small"}},[s("div",{staticClass:"ls-card m-t-16"},[s("div",{staticClass:"card-content m-t-24"},[s("el-form-item",{attrs:{label:"直播间标题",prop:"name"}},[s("el-input",{attrs:{placeholder:"请输入直播标题"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),s("el-form-item",{attrs:{label:"直播类型",prop:"type"}},[s("el-radio-group",{staticClass:"m-r-16",model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[s("el-radio",{staticClass:"m-r-16",attrs:{label:0}},[e._v("手机直播")])],1),s("div",{staticClass:"muted xs m-r-16"},[e._v("通过“小程序直播/推流设备”开播")])],1),s("el-form-item",{attrs:{label:"开播时间",prop:""}},[s("el-date-picker",{attrs:{"picker-options":e.pickerOptions,type:"datetime",placeholder:"请输入开播时间",align:"right","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.start,callback:function(t){e.start=t},expression:"start"}}),s("div",{staticClass:"muted xs m-r-16"},[e._v(" 填写直播开始时间，开播时间需要在当前时间的10分钟后并且不能在6个月后 ")])],1),s("el-form-item",{attrs:{label:"结束时间",prop:""}},[s("el-date-picker",{attrs:{"picker-options":e.pickerOptions,type:"datetime",placeholder:"请输入结束时间",align:"right","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.end,callback:function(t){e.end=t},expression:"end"}}),s("div",{staticClass:"muted xs m-r-16"},[e._v("开播时间和结束时间间隔不得短于30分钟，不得超过24小时")])],1),s("el-form-item",{attrs:{label:"主播昵称",prop:"anchor_name"}},[s("el-input",{attrs:{placeholder:"请输入主播昵称"},model:{value:e.form.anchor_name,callback:function(t){e.$set(e.form,"anchor_name",t)},expression:"form.anchor_name"}})],1),s("el-form-item",{attrs:{label:"主播微信号",prop:"anchor_wechat"}},[s("el-input",{attrs:{placeholder:"请输入主播微信号"},model:{value:e.form.anchor_wechat,callback:function(t){e.$set(e.form,"anchor_wechat",t)},expression:"form.anchor_wechat"}}),s("div",{staticClass:"muted xs m-r-16"},[e._v(" 每个直播间需要绑定主播微信号身份，用以核实主播身份，不会展示给观众。 ")])],1),s("el-form-item",{attrs:{label:"分享卡片封面",prop:"share_img"}},[s("live-upload",{on:{setImage:e.setShareImg}}),s("div",{staticClass:"muted xs m-r-16"},[e._v("用户在微信对话框内分享的直播间将以分享卡片的形式呈现。")]),s("div",{staticClass:"muted xs m-r-16"},[e._v("建议尺寸：800像素 * 640像素，图片大小不得超过1M。")])],1),s("el-form-item",{attrs:{label:"直播卡片封面",prop:"feeds_img"}},[s("live-upload",{on:{setImage:e.setFeedsImg}}),s("div",{staticClass:"muted xs m-r-16"},[e._v("图片建议大小为 800像素 * 800像素。图片大小不超过300KB。")])],1),s("el-form-item",{attrs:{label:"直播间背景墙",prop:"cover_img"}},[s("live-upload",{on:{setImage:e.setCoverImg}}),s("div",{staticClass:"muted xs m-r-16"},[e._v(" 直播间背景墙是每个直播间的默认背景。 建议尺寸：600像素 * 1300像素，图片大小不得超过3M ")])],1),s("el-form-item",{attrs:{label:"直播间功能",prop:""}},[s("el-checkbox",{attrs:{"true-label":0,"false-label":1},model:{value:e.form.close_like,callback:function(t){e.$set(e.form,"close_like",t)},expression:"form.close_like"}},[e._v("开启点赞")]),s("el-checkbox",{attrs:{"true-label":0,"false-label":1},model:{value:e.form.close_goods,callback:function(t){e.$set(e.form,"close_goods",t)},expression:"form.close_goods"}},[e._v("开启货架")]),s("el-checkbox",{attrs:{"true-label":0,"false-label":1},model:{value:e.form.close_comment,callback:function(t){e.$set(e.form,"close_comment",t)},expression:"form.close_comment"}},[e._v("开启评论")]),s("el-checkbox",{attrs:{"true-label":0,"false-label":1},model:{value:e.form.close_replay,callback:function(t){e.$set(e.form,"close_replay",t)},expression:"form.close_replay"}},[e._v("开启回放")]),s("el-checkbox",{attrs:{"true-label":0,"false-label":1},model:{value:e.form.close_share,callback:function(t){e.$set(e.form,"close_share",t)},expression:"form.close_share"}},[e._v("开启分享")]),s("el-checkbox",{attrs:{"true-label":0,"false-label":1},model:{value:e.form.close_kf,callback:function(t){e.$set(e.form,"close_kf",t)},expression:"form.close_kf"}},[e._v("开启客服")]),s("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.form.is_feeds_public,callback:function(t){e.$set(e.form,"is_feeds_public",t)},expression:"form.is_feeds_public"}},[e._v("开启官方收录 ")])],1)],1)])]),s("div",{staticClass:"bg-white ls-fixed-footer"},[s("div",{staticClass:"row-center flex",staticStyle:{height:"100%"}},[s("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.onSubmit()}}},[e._v("保存")])],1)])],1)}),[],!1,null,"9a5ac00c",null));t.default=v.exports},bd84:function(e,t,s){},d0a9:function(e,t,s){"use strict";s("bd84")}}]);