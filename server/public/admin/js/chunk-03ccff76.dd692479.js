(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-03ccff76"],{4536:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return r})),i.d(e,"d",(function(){return l})),i.d(e,"c",(function(){return o}));var s=i("f175");const a=t=>s.a.post("/recharge.recharge/dataCenter",t),r=t=>s.a.get("/recharge.recharge/getConfig",{params:t}),l=t=>s.a.post("/recharge.recharge/setConfig",t),o=t=>s.a.get("/recharge.recharge/lists",{params:t})},"63be":function(t,e,i){},7325:function(t,e,i){},"83a1":function(t,e,i){"use strict";i.r(e);var s=i("9ab4"),a=i("1b40"),r=i("a897"),l=i("0a6d"),o=i("b3ad"),n=i("4536");let c=class extends a.e{constructor(){super(...arguments),this.list={set:{open:1,min_amount:100},rule:[{money:50,award:[{give_money:5}]}]}}addRule(){if(this.list.rule.length>=10)return this.$message.error("不能继续添加了!");this.list.rule.push({money:0,award:[{give_money:0}]})}delRule(t){if(this.list.rule.length<=1)return this.$message.error("已经是最后一个了!");this.list.rule.splice(t,1)}onSubmit(){const t={rule:this.list.rule,...this.list.set};try{t.rule.forEach(t=>delete t.id)}catch(t){}Object(n.d)({...t}).then(()=>{this.detail(),this.$message.success("修改成功!")}).catch(()=>{this.$message.error("数据获取失败!")})}detail(){Object(n.b)({}).then(t=>{this.list=t}).catch(()=>{this.$message.error("数据获取失败!")})}created(){this.detail()}};c=Object(s.a)([Object(a.a)({components:{MaterialSelect:o.a,lsDialog:l.a,LsEditor:r.a}})],c);var d=c,u=(i("cf5a"),i("2877")),h=Object(u.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ls-add-admin"},[i("div",{staticClass:"ls-card ls-coupon-edit__form m-t-10"},[i("div",{staticClass:"nr weight-500 m-b-20"},[t._v("充值设置")]),i("el-form",{ref:"list",attrs:{model:t.list,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"应用状态"}},[i("el-radio",{attrs:{label:0},model:{value:t.list.set.open,callback:function(e){t.$set(t.list.set,"open",e)},expression:"list.set.open"}},[t._v("关闭")]),i("el-radio",{attrs:{label:1},model:{value:t.list.set.open,callback:function(e){t.$set(t.list.set,"open",e)},expression:"list.set.open"}},[t._v("开启")]),i("span",{staticClass:"desc"},[t._v("关闭或开启充值功能，关闭后商城将不显示充值入口")])],1),i("el-form-item",{attrs:{label:"最低充值金额",prop:"send_total_type"}},[i("el-input",{attrs:{placeholder:""},model:{value:t.list.set.min_amount,callback:function(e){t.$set(t.list.set,"min_amount",e)},expression:"list.set.min_amount"}}),i("span",{staticClass:"desc"},[t._v("最低充值金额要求，不填或填0表示不限制最低充值金额")])],1)],1)],1),i("div",{staticClass:"ls-card ls-coupon-edit__form m-t-10"},[i("div",{staticClass:"nr weight-500 m-b-20"},[t._v("充值规则")]),i("el-form",{ref:"list",staticStyle:{width:"1000px"},attrs:{model:t.list,"label-width":"120px",size:"small"}},[t._l(t.list.rule,(function(e,s){return i("el-form-item",{key:s,attrs:{label:"规则"+(s+1)}},[i("div",{staticClass:"item"},[i("el-form",{attrs:{model:e,"label-width":"120px"}},[i("el-form-item",{attrs:{required:"",label:"单笔充值满"}},[i("el-input",{staticClass:"m-r-10",model:{value:t.list.rule[s].money,callback:function(e){t.$set(t.list.rule[s],"money",e)},expression:"list.rule[index].money"}}),t._v(" 元 ")],1),i("el-form-item",{staticClass:"m-t-10",attrs:{required:"",label:"充值奖励"}},[i("el-input",{staticClass:"m-r-10",model:{value:t.list.rule[s].award[0].give_money,callback:function(e){t.$set(t.list.rule[s].award[0],"give_money",e)},expression:"list.rule[index].award[0].give_money"}}),t._v(" 元 ")],1)],1),i("div",{staticClass:"del m-t-5",on:{click:function(e){return t.delRule(s)}}},[i("i",{staticClass:"el-icon-delete"})])],1)])})),i("el-form-item",[i("div",{staticClass:"add-btn flex row-center",on:{click:t.addRule}},[t._v("+添加 "+t._s(t.list.rule.length)+"/10")])])],2)],1),i("div",{staticClass:"bg-white ls-fixed-footer flex row-center"},[i("div",{staticClass:"row-center flex"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v("保存")])],1)])])}),[],!1,null,"6ec38914",null);e.default=h.exports},"84f7":function(t,e,i){"use strict";i("63be")},a897:function(t,e,i){"use strict";var s=i("9ab4"),a=i("1b40"),r=i("6fad"),l=i.n(r),o=i("b3ad"),n=i("6ddb"),c=i("d70b");let d=class extends a.e{constructor(){super(...arguments),this.firstData=!0,this.identify=""}get editStyle(){return this.width?{width:this.width+"px"}:{}}valueChange(t){this.firstData&&(this.firstData=!1,this.editor.txt.html(t))}handeleChange(t){t.forEach(t=>{this.editor.cmd.do("insertHTML",`<img src="${t}" style="max-width:100%;"/>`)})}created(){this.identify="editor-"+Object(n.g)(3)}mounted(){this.editor=new l.a("#"+this.identify),this.editor.config.height=this.height,this.editor.config.menus=this.menu,this.editor.config.menuTooltipPosition="down",this.editor.config.showFullScreen=!1,this.editor.config.showLinkImg=!1,this.editor.config.uploadImgShowBase64=!0,this.editor.config.zIndex=1,this.editor.config.uploadImgFromMedia=()=>{this.$refs.materialSelect.showDialog()},this.editor.config.onchange=t=>{this.$emit("input",t)},this.editor.config.uploadVideoServer=c.a.baseURL+"/adminapi/upload/video",this.editor.config.uploadVideoHeaders={token:this.$store.getters.token,version:c.a.version},this.editor.config.uploadVideoName="file",this.editor.config.uploadVideoHooks={fail:(t,e,i)=>{this.$message.error("上传视频失败")},timeout:t=>{this.$message.error("上传视频超时")},customInsert:(t,e)=>{1==e.code?t(e.data.uri):this.$message.error(e.msg)}},this.editor.create()}beforeDestroy(){this.editor.destroy()}};Object(s.a)([Object(a.c)()],d.prototype,"value",void 0),Object(s.a)([Object(a.c)({default:()=>["head","bold","fontSize","fontName","italic","underline","strikeThrough","indent","lineHeight","foreColor","link","list","justify","quote","emoticon","image","video","undo","redo"]})],d.prototype,"menu",void 0),Object(s.a)([Object(a.c)({default:600})],d.prototype,"height",void 0),Object(s.a)([Object(a.c)()],d.prototype,"width",void 0),Object(s.a)([Object(a.f)("value")],d.prototype,"valueChange",null),d=Object(s.a)([Object(a.a)({components:{MaterialSelect:o.a}})],d);var u=d,h=(i("84f7"),i("2877")),m=Object(h.a)(u,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ls-editor"},[e("div",{staticClass:"editor",style:[this.editStyle],attrs:{id:this.identify}}),e("material-select",{ref:"materialSelect",attrs:{limit:null,"hidden-trigger":!0},on:{change:this.handeleChange}})],1)}),[],!1,null,"00c8867e",null);e.a=m.exports},cf5a:function(t,e,i){"use strict";i("7325")}}]);