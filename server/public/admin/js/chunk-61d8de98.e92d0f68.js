(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-61d8de98"],{2322:function(t,e,s){"use strict";s.d(e,"d",(function(){return l})),s.d(e,"c",(function(){return i})),s.d(e,"f",(function(){return r})),s.d(e,"a",(function(){return o})),s.d(e,"b",(function(){return n})),s.d(e,"e",(function(){return c}));var a=s("f175");const l=t=>a.a.get("/marketing.discount/lists",{params:t}),i=t=>a.a.post("/marketing.discount/join",t),r=t=>a.a.post("/marketing.discount/quit",t),o=t=>a.a.get("/marketing.discount/detail",{params:t}),n=t=>a.a.post("/marketing.discount/setDiscount",t),c=t=>a.a.get("/marketing.discount/otherLists",{params:t})},"3a84":function(t,e,s){"use strict";s("d36b")},"5e53":function(t,e,s){"use strict";s.r(e);var a=s("9ab4"),l=s("1b40"),i=s("b3ad"),r=s("4201"),o=s("2322");let n=class extends l.e{constructor(){super(...arguments),this.mode=r.f.EDIT,this.memberPriceType={MEMBER_LEVEL_PRICE:1,ALONE_SETUP:2},this.specType={ALONE_SPECIFICATION:1,MUCH_SPECIFICATION:2},this.goods_id="",this.formData={discount_rule:"",spec_type:"",is_discount:""},this.discountRulesData=[]}getMemberDiscountDetail(){Object(o.a)({goods_id:this.goods_id}).then(t=>{this.formData=t,this.discountRulesData=t.level_goods_item})}handleMemberDiscountEdit(){Object(o.b)({...this.formData,id:this.goods_id}).then(()=>{setTimeout(()=>this.$router.go(-1),500)})}onSubmit(){this.$refs.formRef.validate(t=>{if(t)switch(this.mode){case r.f.EDIT:return this.handleMemberDiscountEdit()}})}created(){const t=this.$route.query;t.id&&(this.goods_id=t.id),this.getMemberDiscountDetail()}};n=Object(a.a)([Object(l.a)({components:{MaterialSelect:i.a}})],n);var c=n,u=(s("3a84"),s("2877")),d=Object(u.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"member-price-edit"},[s("div",{staticClass:"ls-card"},[s("el-page-header",{attrs:{content:"设置会员价"},on:{back:function(e){return t.$router.go(-1)}}})],1),s("el-form",{ref:"formRef",attrs:{model:t.formData,"label-width":"120px",size:"small"}},[s("div",{staticClass:"ls-card m-t-15"},[s("div",{staticClass:"card-title"},[t._v("商品信息")]),s("div",{staticClass:"card-content m-t-24"},[s("el-form-item",{attrs:{label:"商品编号"}},[t._v(" "+t._s(t.formData.code)+" ")]),s("el-form-item",{attrs:{label:"商品图片",prop:"logo"}},[s("img",{staticClass:"flex-none",staticStyle:{width:"100px",height:"100px"},attrs:{src:t.formData.image}})]),s("el-form-item",{attrs:{label:"商品名称"}},[t._v(" "+t._s(t.formData.name)+" ")])],1)]),s("div",{staticClass:"ls-card m-t-15"},[s("div",{staticClass:"card-title"},[t._v("会员价设置")]),s("div",{staticClass:"card-content m-t-24"},[s("el-form-item",{attrs:{label:"参与折扣"}},[s("el-radio-group",{model:{value:t.formData.is_discount,callback:function(e){t.$set(t.formData,"is_discount",e)},expression:"formData.is_discount"}},[s("el-radio",{attrs:{label:1}},[t._v("参与")]),s("el-radio",{attrs:{label:0}},[t._v("不参与")])],1),s("div",{staticClass:"muted xs m-r-16"},[t._v("是否参与会员折扣，选择不参与用户消费将不产生会员折扣")])],1),s("el-form-item",{attrs:{label:"折扣规则"}},[s("el-radio-group",{model:{value:t.formData.discount_rule,callback:function(e){t.$set(t.formData,"discount_rule",e)},expression:"formData.discount_rule"}},[s("el-radio",{attrs:{label:t.memberPriceType.MEMBER_LEVEL_PRICE}},[t._v(" 根据会员等级设置 ")]),s("el-radio",{attrs:{label:t.memberPriceType.ALONE_SETUP}},[t._v(" 单独设置 ")])],1),s("div",{staticClass:"muted xs m-r-16"},[t._v("默认使用会员等级设置的折扣")]),t.formData.discount_rule==t.memberPriceType.MEMBER_LEVEL_PRICE?s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.discountRulesData,size:"mini","header-cell-style":{background:"#f5f8ff"}}},[s("el-table-column",{attrs:{prop:"name",label:"分销等级"}}),s("el-table-column",{attrs:{prop:"spec_value_str",label:"商品规格"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goods_item,(function(e,a){return s("div",{key:a,staticClass:"m-b-10 m-t-10"},[t._v(" "+t._s(e.spec_value_str)+" ")])}))}}],null,!1,4036533621)}),s("el-table-column",{attrs:{prop:"sell_price",label:"价格"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goods_item,(function(e,a){return s("div",{key:a,staticClass:"m-b-10 m-t-10"},[t._v(" ¥"+t._s(e.sell_price)+" ")])}))}}],null,!1,790379375)}),s("el-table-column",{attrs:{prop:"discount",label:"会员价"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.discount<=0?s("div",[t._v("无折扣")]):s("div",[t._v(t._s(e.row.discount)+" 折")])]}}],null,!1,1009756040)})],1)],1):t._e(),t.formData.discount_rule==t.memberPriceType.ALONE_SETUP?s("div",[t.formData.spec_type==t.specType.ALONE_SPECIFICATION?s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.discountRulesData,size:"mini","header-cell-style":{background:"#f5f8ff"}}},[s("el-table-column",{attrs:{prop:"name",label:"分销等级"}}),s("el-table-column",{attrs:{prop:"spec_value_str",label:"商品规格"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goods_item,(function(e,a){return s("div",{key:a,staticClass:"m-b-10 m-t-10"},[t._v(" "+t._s(e.spec_value_str)+" ")])}))}}],null,!1,4036533621)}),s("el-table-column",{attrs:{prop:"sell_price",label:"价格"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goods_item,(function(e,a){return s("div",{key:a,staticClass:"m-b-10 m-t-10"},[t._v(" ¥"+t._s(e.sell_price)+" ")])}))}}],null,!1,790379375)}),s("el-table-column",{attrs:{prop:"discount_price",label:"会员价 (元)"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goods_item,(function(e,a){return s("el-input",{key:a,staticStyle:{width:"220px"},attrs:{placeholder:"请输入",oninput:"value=value.replace(/[^0-9.]/g,'')"},model:{value:e.discount_price,callback:function(s){t.$set(e,"discount_price",s)},expression:"item.discount_price"}},[s("template",{slot:"append"},[t._v(" 元 ")])],2)}))}}],null,!1,2580803710)})],1)],1):t._e(),t.formData.spec_type==t.specType.MUCH_SPECIFICATION?s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.discountRulesData,size:"mini","header-cell-style":{background:"#f5f8ff"}}},[s("el-table-column",{attrs:{prop:"name",label:"分销等级"}}),s("el-table-column",{attrs:{prop:"spec_value_str",label:"商品规格"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goods_item,(function(e,a){return s("div",{key:a,staticClass:"m-b-10 m-t-10"},[t._v(" "+t._s(e.spec_value_str)+" ")])}))}}],null,!1,4036533621)}),s("el-table-column",{attrs:{prop:"sell_price",label:"价格"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goods_item,(function(e,a){return s("div",{key:a,staticClass:"m-b-10 m-t-10"},[t._v(" ¥"+t._s(e.sell_price)+" ")])}))}}],null,!1,790379375)}),s("el-table-column",{attrs:{prop:"discount_price",label:"会员价 (元)"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goods_item,(function(e,a){return s("el-input",{key:a,staticClass:"m-b-10 m-t-10",staticStyle:{width:"220px"},attrs:{placeholder:"请输入",oninput:"value=value.replace(/[^0-9.]/g,'')"},model:{value:e.discount_price,callback:function(s){t.$set(e,"discount_price",s)},expression:"item.discount_price"}},[s("template",{slot:"append"},[t._v(" 元 ")])],2)}))}}],null,!1,1179135560)})],1)],1):t._e()]):t._e()],1)],1)])]),s("div",{staticClass:"bg-white ls-fixed-footer"},[s("div",{staticClass:"row-center flex",staticStyle:{height:"100%"}},[s("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.onSubmit()}}},[t._v(" 保存 ")])],1)])],1)}),[],!1,null,"498a3f38",null);e.default=d.exports},d36b:function(t,e,s){}}]);