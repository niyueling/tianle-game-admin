(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1594571a"],{"096c":function(e,t,s){},"0cbf":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"e",(function(){return a})),s.d(t,"g",(function(){return i})),s.d(t,"c",(function(){return o})),s.d(t,"h",(function(){return l})),s.d(t,"l",(function(){return u})),s.d(t,"k",(function(){return c})),s.d(t,"d",(function(){return d})),s.d(t,"f",(function(){return p})),s.d(t,"m",(function(){return f})),s.d(t,"i",(function(){return m})),s.d(t,"n",(function(){return h})),s.d(t,"j",(function(){return b})),s.d(t,"b",(function(){return g}));var r=s("f175");const n=e=>r.a.post("/marketing.coupon/add",e),a=e=>r.a.post("/marketing.coupon/edit",e),i=e=>r.a.get("/marketing.coupon/lists",{params:e}),o=e=>r.a.post("/marketing.coupon/delete",e),l=e=>r.a.post("/marketing.coupon/open",e),u=e=>r.a.post("/marketing.coupon/stop",e),c=e=>r.a.post("/marketing.coupon/sort",e),d=e=>r.a.get("/marketing.coupon/detail",{params:{id:e}}),p=e=>r.a.get("/marketing.coupon/info",{params:{id:e}}),f=()=>r.a.get("/marketing.coupon/survey"),m=e=>r.a.get("/marketing.coupon/record",{params:e}),h=e=>r.a.post("/marketing.coupon/void",e),b=e=>r.a.post("/marketing.coupon/send",e),g=e=>r.a.get("/marketing.coupon/commonLists",{params:e})},"5cf7":function(e,t,s){"use strict";var r=s("9ab4"),n=s("0463"),a=s("1b40");let i=class extends a.e{constructor(){super(...arguments),this.options=n.a}get areaValue(){return[this.province,this.city,this.district]}set areaValue(e){this.$emit("update:province",e[0]),this.$emit("update:city",e[1]),this.$emit("update:district",e[2])}};Object(r.a)([Object(a.c)()],i.prototype,"province",void 0),Object(r.a)([Object(a.c)()],i.prototype,"city",void 0),Object(r.a)([Object(a.c)()],i.prototype,"district",void 0),Object(r.a)([Object(a.c)({default:"380px"})],i.prototype,"width",void 0),i=Object(r.a)([a.a],i);var o=i,l=s("2877"),u=Object(l.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"area-select"},[s("el-cascader",{style:{width:e.width},attrs:{options:e.options},model:{value:e.areaValue,callback:function(t){e.areaValue=t},expression:"areaValue"}})],1)}),[],!1,null,null,null);t.a=u.exports},"65a4":function(e,t,s){"use strict";s("caad");var r=s("9ab4"),n=s("1b40"),a=s("6ddb"),i=s("3c50"),o=s("f633");let l=class extends n.e{constructor(){super(...arguments),this.visible=!1,this.userSearchData={nickname:""},this.pager=new a.a,this.selectIds=[]}get selectItem(){return e=>this.selectIds.some(t=>t.id===e.id)}get selectAll(){const e=this.selectIds.map(e=>e.id);return this.pager.lists.every(t=>e.includes(t.id))}set selectAll(e){this.selectIds=e?JSON.parse(JSON.stringify(this.pager.lists)):[]}handleSelect(e,t){if(e)this.selectIds.push(t);else{const e=this.selectIds.findIndex(e=>e.id===t.id);-1!=e&&this.selectIds.splice(e,1)}}removeSelectGoods(e){const t=this.selectIds.map(t=>t.id==e);-1!=t&&this.selectIds.splice(t,1)}getUserInfoList(e){e&&(this.pager.page=e),this.pager.request({callback:o.a,params:{...this.userSearchData,is_distribution:this.is_distribution}})}resetuserSearchData(){Object.keys(this.userSearchData).map(e=>{this.$set(this.userSearchData,e,"")}),this.getUserInfoList()}selectionChange(e){this.selectIds=e.map(e=>e)}handleEvent(e){"cancel"===e&&(this.selectIds=[],this.close()),"confirm"===e&&(this.$emit("input",this.selectIds),this.close())}onTrigger(){this.visible=!0,this.getUserInfoList()}close(){this.visible=!1}created(){this.getUserInfoList()}};Object(r.a)([Object(n.c)({default:"5vh"})],l.prototype,"top",void 0),Object(r.a)([Object(n.c)({default:0})],l.prototype,"is_distribution",void 0),l=Object(r.a)([Object(n.a)({components:{LsPagination:i.a}})],l);var u=l,c=(s("9433"),s("2877")),d=Object(c.a)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"ls-dialog__trigger",on:{click:e.onTrigger}},[e._t("trigger")],2),s("el-dialog",{attrs:{"coustom-class":"ls-dialog__content",title:"用户选择",visible:e.visible,width:"70vw",top:e.top,"modal-append-to-body":!1,center:"","before-close":e.close,"close-on-click-modal":!1,"append-to-body":""}},[s("div",{staticClass:"user-search m-t-16 flex row-between"},[s("div",{staticStyle:{height:"53px"}},[s("el-checkbox",{model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}},[e._v("全选")])],1),s("el-form",{ref:"form",attrs:{inline:"",model:e.userSearchData,"label-width":"80px",size:"small"}},[s("el-form-item",{attrs:{label:"用户搜索"}},[s("el-input",{staticClass:"header-input",attrs:{placeholder:"请输入用户名称"},model:{value:e.userSearchData.nickname,callback:function(t){e.$set(e.userSearchData,"nickname",t)},expression:"userSearchData.nickname"}})],1),s("el-form-item",{staticClass:"m-l-6",attrs:{label:""}},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.getUserInfoList(1)}}},[e._v("查询")]),s("el-button",{attrs:{size:"small"},on:{click:e.resetuserSearchData}},[e._v("重置")])],1)],1)],1),s("div",[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.pager.loading,expression:"pager.loading"}],ref:"paneTable",staticStyle:{width:"100%"},attrs:{height:"500",size:"mini",data:e.pager.lists}},[s("el-table-column",{attrs:{fixed:"left",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-checkbox",{attrs:{value:e.selectItem(t.row)},on:{change:function(s){return e.handleSelect(s,t.row)}}})]}}])}),s("el-table-column",{attrs:{prop:"sn",label:"用户编号","min-width":"120"}}),s("el-table-column",{attrs:{label:"用户昵称","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"flex"},[s("el-image",{staticStyle:{width:"34px",height:"34px"},attrs:{src:t.row.avatar}}),s("div",{staticClass:"m-l-10"},[e._v(" "+e._s(t.row.nickname)+" ")])],1)]}}])}),s("el-table-column",{attrs:{prop:"user_money",label:"用户余额","min-width":"120"}}),s("el-table-column",{attrs:{prop:"mobile",label:"手机号码","min-width":"120"}}),s("el-table-column",{attrs:{prop:"is_distribution",label:"分销商","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1==t.row.is_distribution?"是":"否")+" ")]}}])}),s("el-table-column",{attrs:{prop:"create_time",label:"注册时间","min-width":"120"}})],1)],1),s("div",{staticClass:"m-t-24 flex row-center"},[s("ls-pagination",{on:{change:function(t){return e.getUserInfoList()}},model:{value:e.pager,callback:function(t){e.pager=t},expression:"pager"}})],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handleEvent("cancel")}}},[e._v("取消并关闭")]),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handleEvent("confirm")}}},[e._v("确认选择")])],1)]),0!=e.selectIds.length?s("el-table",{ref:"paneTable",staticClass:"m-t-24",staticStyle:{width:"100%"},attrs:{height:"250",size:"mini",data:e.selectIds}},[s("el-table-column",{attrs:{prop:"sn",label:"用户编号"}}),s("el-table-column",{attrs:{label:"用户昵称","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"flex"},[s("el-image",{staticStyle:{width:"34px",height:"34px"},attrs:{src:t.row.avatar}}),s("div",{staticClass:"m-l-10"},[e._v(" "+e._s(t.row.nickname)+" ")])],1)]}}],null,!1,3993698936)}),s("el-table-column",{attrs:{prop:"is_distribution",label:"分销商",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1==t.row.is_distribution?"是":"否")+" ")]}}],null,!1,1070472895)}),s("el-table-column",{attrs:{prop:"mobile",label:"手机号码"}}),s("el-table-column",{attrs:{label:"操作",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.removeSelectGoods(t.row.id)}}},[e._v("移除")])]}}],null,!1,3764884895)})],1):e._e()],1)}),[],!1,null,"1ef59b02",null);t.a=d.exports},9433:function(e,t,s){"use strict";s("096c")},f633:function(e,t,s){"use strict";s.d(t,"o",(function(){return n})),s.d(t,"k",(function(){return a})),s.d(t,"m",(function(){return i})),s.d(t,"n",(function(){return o})),s.d(t,"l",(function(){return l})),s.d(t,"j",(function(){return u})),s.d(t,"f",(function(){return c})),s.d(t,"h",(function(){return d})),s.d(t,"i",(function(){return p})),s.d(t,"g",(function(){return f})),s.d(t,"p",(function(){return m})),s.d(t,"q",(function(){return h})),s.d(t,"b",(function(){return b})),s.d(t,"s",(function(){return g})),s.d(t,"t",(function(){return _})),s.d(t,"u",(function(){return v})),s.d(t,"r",(function(){return k})),s.d(t,"c",(function(){return w})),s.d(t,"d",(function(){return I})),s.d(t,"e",(function(){return y})),s.d(t,"v",(function(){return S})),s.d(t,"a",(function(){return x}));var r=s("f175");const n=e=>r.a.get("/user.user_level/lists",{params:e}),a=e=>r.a.post("/user.user_level/add",e),i=e=>r.a.get("/user.user_level/detail",{params:e}),o=e=>r.a.post("/user.user_level/edit",e),l=e=>r.a.post("/user.user_level/del",e),u=e=>r.a.get("/user.user_label/lists",{params:e}),c=e=>r.a.post("/user.user_label/add",e),d=e=>r.a.get("/user.user_label/detail",{params:e}),p=e=>r.a.post("/user.user_label/edit",e),f=e=>r.a.post("/user.user_label/del",e),m=e=>r.a.get("/user.user/lists",{params:e}),h=()=>r.a.get("/user.user/otherList"),b=e=>r.a.get("/user.user/detail",{params:e}),g=e=>r.a.post("/user.user/setInfo",e),_=e=>r.a.post("/user.user/setLabel",e),v=e=>r.a.post("/user.user/setUserLabel",e),k=e=>r.a.post("/user.user/adjustUserWallet",e),w=()=>r.a.get("/user.user/index"),I=e=>r.a.get("/user.user/info",{params:e}),y=e=>r.a.get("/user.user/userInviterLists",{params:e}),S=e=>r.a.post("/user.user/adjustFirstLeader",e),x=e=>r.a.get("/user.user/selectUserLists",{params:e})},f9e6:function(e,t,s){"use strict";s.r(t);var r=s("9ab4"),n=s("1b40"),a=s("5cf7"),i=s("65a4"),o=s("0cbf");let l=class extends n.e{constructor(){super(...arguments),this.couponInfo={id:this.id,send_user_num:"",send_user:[]},this.userSelectData=[]}submit(e){this.couponSend()}couponSend(){if(null==this.couponInfo.send_user_num)return this.$message.error("请输入要发放的优惠券数量！!");if(this.couponInfo.send_user_num<0||isNaN(this.couponInfo.send_user_num))return this.$message.error("不允许输入负数与非数字");if(0==this.userSelectData.length)return this.$message.error("请输入要发放的用户！!");const e={id:this.id,send_user_num:this.couponInfo.send_user_num,send_user:this.userSelectData.map(e=>e.id)};Object(o.j)({...e}).then(e=>{setTimeout(()=>this.$router.go(-1),500)})}getCouponInfo(){Object(o.f)(this.id).then(e=>{this.couponInfo=e})}created(){this.id=this.$route.query.id,this.id&&this.getCouponInfo()}};l=Object(r.a)([Object(n.a)({components:{AreaSelect:a.a,UserSelect:i.a}})],l);var u=l,c=s("2877"),d=Object(c.a)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ls-coupon-edit"},[s("div",{staticClass:"ls-card ls-coupon-edit__header"},[s("el-page-header",{attrs:{content:"发放优惠券"},on:{back:function(t){return e.$router.go(-1)}}})],1),s("div",{staticClass:"ls-card ls-coupon-edit__form m-t-10"},[s("div",{staticClass:"lg weight-500 m-b-20"},[e._v("优惠券信息")]),s("el-form",{ref:"couponInfo",attrs:{model:e.couponInfo,"label-width":"120px",size:"small"}},[s("el-form-item",{attrs:{label:"优惠券编号：",prop:"",required:""}},[[e._v(" "+e._s(this.couponInfo.sn)+" ")]],2),s("el-form-item",{attrs:{label:"优惠券名称：",prop:"",required:""}},[[e._v(" "+e._s(this.couponInfo.name)+" ")]],2),s("el-form-item",{attrs:{label:"推广方式：",prop:"",required:""}},[[e._v(" "+e._s(this.couponInfo.get_method)+" ")]],2),s("el-form-item",{attrs:{label:"用券时间：",prop:"",required:""}},[[e._v(" "+e._s(this.couponInfo.use_time_text)+" ")]],2),s("el-form-item",{attrs:{label:"发放总量：",prop:"",required:""}},[[e._v(" "+e._s(this.couponInfo.send_total)+" ")]],2),s("el-form-item",{attrs:{label:"剩余发放量：",prop:"",required:""}},[[e._v(" "+e._s(this.couponInfo.surplus_number)+" ")]],2)],1)],1),s("div",{staticClass:"ls-card ls-coupon-edit__form m-t-10 m-b-60"},[s("div",{staticClass:"lg weight-500 m-b-20"},[e._v("发放设置")]),s("el-form",{ref:"couponInfo",attrs:{model:e.couponInfo,"label-width":"120px",size:"small"}},[s("el-form-item",{attrs:{label:"每人发放张数"}},[s("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入发放的优惠券数量"},model:{value:e.couponInfo.send_user_num,callback:function(t){e.$set(e.couponInfo,"send_user_num",e._n(t))},expression:"couponInfo.send_user_num"}})],1),s("el-form-item",{attrs:{label:"发放范围",required:""}},[s("div",[s("user-select",{attrs:{is_distribution:""},model:{value:e.userSelectData,callback:function(t){e.userSelectData=t},expression:"userSelectData"}},[s("el-button",{attrs:{slot:"trigger",size:"mini",type:"primary"},slot:"trigger"},[e._v("选择用户")])],1)],1)])],1)],1),s("div",{staticClass:"ls-coupon-edit__footer bg-white ls-fixed-footer"},[s("div",{staticClass:"btns row-center flex",staticStyle:{height:"100%"}},[s("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submit("couponInfo")}}},[e._v("保存 ")])],1)])])}),[],!1,null,"b72d34ac",null);t.default=d.exports}}]);