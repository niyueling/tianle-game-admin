(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2eed3d5f"],{"0a29":function(e,t,a){},"3b30":function(e,t,a){"use strict";a("0a29")},"63be":function(e,t,a){},"84f7":function(e,t,a){"use strict";a("63be")},"92f3":function(e,t,a){"use strict";a.d(t,"h",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"g",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"j",(function(){return n})),a.d(t,"f",(function(){return c})),a.d(t,"m",(function(){return d})),a.d(t,"l",(function(){return m})),a.d(t,"k",(function(){return u})),a.d(t,"e",(function(){return f})),a.d(t,"c",(function(){return p})),a.d(t,"b",(function(){return g})),a.d(t,"i",(function(){return h}));var r=a("f175");const i=e=>r.a.get("/integral.integral_goods/lists",{params:e}),o=e=>r.a.post("/integral.integral_goods/add",e),s=e=>r.a.post("/integral.integral_goods/edit",e),l=e=>r.a.post("/integral.integral_goods/del",e),n=e=>r.a.post("/integral.integral_goods/status",e),c=e=>r.a.get("/integral.integral_goods/detail",{params:e}),d=e=>r.a.get("/integral.integral_order/lists",{params:e}),m=e=>r.a.get("/integral.integral_order/detail",{params:e}),u=e=>r.a.get("/integral.integral_order/deliveryInfo",{params:e}),f=e=>r.a.post("/integral.integral_order/delivery",e),p=e=>r.a.post("/integral.integral_order/confirm",e),g=e=>r.a.post("/integral.integral_order/cancel",e),h=e=>r.a.get("/integral.integral_order/logistics",{params:e})},a897:function(e,t,a){"use strict";var r=a("9ab4"),i=a("1b40"),o=a("6fad"),s=a.n(o),l=a("b3ad"),n=a("6ddb"),c=a("d70b");let d=class extends i.e{constructor(){super(...arguments),this.firstData=!0,this.identify=""}get editStyle(){return this.width?{width:this.width+"px"}:{}}valueChange(e){this.firstData&&(this.firstData=!1,this.editor.txt.html(e))}handeleChange(e){e.forEach(e=>{this.editor.cmd.do("insertHTML",`<img src="${e}" style="max-width:100%;"/>`)})}created(){this.identify="editor-"+Object(n.g)(3)}mounted(){this.editor=new s.a("#"+this.identify),this.editor.config.height=this.height,this.editor.config.menus=this.menu,this.editor.config.menuTooltipPosition="down",this.editor.config.showFullScreen=!1,this.editor.config.showLinkImg=!1,this.editor.config.uploadImgShowBase64=!0,this.editor.config.zIndex=1,this.editor.config.uploadImgFromMedia=()=>{this.$refs.materialSelect.showDialog()},this.editor.config.onchange=e=>{this.$emit("input",e)},this.editor.config.uploadVideoServer=c.a.baseURL+"/adminapi/upload/video",this.editor.config.uploadVideoHeaders={token:this.$store.getters.token,version:c.a.version},this.editor.config.uploadVideoName="file",this.editor.config.uploadVideoHooks={fail:(e,t,a)=>{this.$message.error("上传视频失败")},timeout:e=>{this.$message.error("上传视频超时")},customInsert:(e,t)=>{1==t.code?e(t.data.uri):this.$message.error(t.msg)}},this.editor.create()}beforeDestroy(){this.editor.destroy()}};Object(r.a)([Object(i.c)()],d.prototype,"value",void 0),Object(r.a)([Object(i.c)({default:()=>["head","bold","fontSize","fontName","italic","underline","strikeThrough","indent","lineHeight","foreColor","link","list","justify","quote","emoticon","image","video","undo","redo"]})],d.prototype,"menu",void 0),Object(r.a)([Object(i.c)({default:600})],d.prototype,"height",void 0),Object(r.a)([Object(i.c)()],d.prototype,"width",void 0),Object(r.a)([Object(i.f)("value")],d.prototype,"valueChange",null),d=Object(r.a)([Object(i.a)({components:{MaterialSelect:l.a}})],d);var m=d,u=(a("84f7"),a("2877")),f=Object(u.a)(m,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ls-editor"},[t("div",{staticClass:"editor",style:[this.editStyle],attrs:{id:this.identify}}),t("material-select",{ref:"materialSelect",attrs:{limit:null,"hidden-trigger":!0},on:{change:this.handeleChange}})],1)}),[],!1,null,"00c8867e",null);t.a=f.exports},f571:function(e,t,a){"use strict";a.r(t);var r=a("9ab4"),i=a("1b40"),o=a("b3ad"),s=a("a897"),l=a("92f3");let n=class extends i.e{constructor(){super(...arguments),this.loading=!1,this.identity=null,this.exchangeType=[{icon:"icon_goods",label:"商品",value:1},{icon:"icon_xycj_cj",label:"红包",value:2}],this.formData={type:1,name:"",code:"",image:"",market_price:"",stock:"",exchange_way:1,need_integral:"",need_money:"",delivery_way:1,express_type:1,express_money:"",sort:0,status:1,content:"",balance:""},this.rules={name:[{required:!0,message:"请输入商品名称",trigger:["blur","change"]}],image:[{required:!0,message:"请输入选择商品封面",trigger:["blur","change"]}],stock:[{required:!0,message:"请输入发放库存",trigger:["blur","change"]}],need_integral:[{required:!0,message:"请输入兑换积分",trigger:["blur","change"]}],need_money:[{required:!0,message:"请输入兑换金额",trigger:["blur","change"]}],balance:[{required:!0,message:"请输入红包面值",trigger:["blur","change"]}],express_money:[{required:!0,message:"请输入运费",trigger:["blur","change"]}]}}get pageTitle(){return this.identity?"编辑积分商品":"新增积分商品"}onSubmit(){this.$refs.formRef.validate(e=>{if(!e)return;(this.identity?Object(l.g)({id:this.identity,...this.formData}):Object(l.a)(this.formData)).then(e=>{setTimeout(()=>{this.$router.back()},1e3)})})}getDetails(){this.loading=!0,Object(l.f)({id:this.identity}).then(e=>{Object.keys(this.formData).map(t=>{this.$set(this.formData,t,e[t])})}).finally(()=>{this.loading=!1})}created(){const e=this.$route.query;this.identity=e.id,this.identity&&this.getDetails()}};n=Object(r.a)([Object(i.a)({components:{MaterialSelect:o.a,Editor:s.a}})],n);var c=n,d=(a("3b30"),a("2877")),m=Object(d.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"integral-goods-edit"},[a("div",{staticClass:"ls-card"},[a("el-page-header",{attrs:{content:e.pageTitle},on:{back:function(t){return e.$router.back()}}})],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"ls-card m-t-16",staticStyle:{"padding-top":"0"}},[a("el-tabs",{attrs:{value:"basic"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"basic"}},[a("el-form",{ref:"formRef",attrs:{model:e.formData,rules:e.rules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"兑换类型",required:""}},[a("div",{staticClass:"flex exchange-type"},e._l(e.exchangeType,(function(t,r){return a("div",{key:r,staticClass:"flex",class:{active:t.value==e.formData.type,disabled:e.identity},on:{click:function(a){!e.identity&&(e.formData.type=t.value)}}},[a("i",{staticClass:"iconfont",class:[t.icon]}),a("span",{staticClass:"m-l-4"},[e._v(e._s(t.label))])])})),0)]),a("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),1==e.formData.type?a("el-form-item",{attrs:{label:"商品编号"}},[a("el-input",{attrs:{placeholder:"请输入商品编号"},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1):e._e(),a("el-form-item",{attrs:{label:"商品封面",prop:"image"}},[a("material-select",{model:{value:e.formData.image,callback:function(t){e.$set(e.formData,"image",t)},expression:"formData.image"}}),a("div",{staticClass:"muted"},[e._v("建议尺寸：800*800")])],1),a("el-form-item",{attrs:{label:"市场价"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入市场价"},model:{value:e.formData.market_price,callback:function(t){e.$set(e.formData,"market_price",t)},expression:"formData.market_price"}},[a("template",{slot:"append"},[e._v("元")])],2)],1),a("el-form-item",{attrs:{label:"发放库存",prop:"stock"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入发放库存"},model:{value:e.formData.stock,callback:function(t){e.$set(e.formData,"stock",t)},expression:"formData.stock"}})],1),1==e.formData.type?a("el-form-item",{attrs:{label:"兑换方式",required:""}},[a("el-radio-group",{model:{value:e.formData.exchange_way,callback:function(t){e.$set(e.formData,"exchange_way",t)},expression:"formData.exchange_way"}},[a("el-radio",{attrs:{label:1}},[e._v("积分")]),a("el-radio",{attrs:{label:2}},[e._v("积分+余额")])],1)],1):e._e(),a("el-form-item",{staticClass:"inline",attrs:{label:"兑换积分",prop:"need_integral"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入"},model:{value:e.formData.need_integral,callback:function(t){e.$set(e.formData,"need_integral",t)},expression:"formData.need_integral"}},[a("template",{slot:"append"},[e._v("积分")])],2)],1),2==e.formData.exchange_way&&1==e.formData.type?[a("span",{staticClass:"p-10"},[e._v(" + ")]),a("el-form-item",{staticClass:"inline",attrs:{prop:"need_money","label-width":"0"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入"},model:{value:e.formData.need_money,callback:function(t){e.$set(e.formData,"need_money",t)},expression:"formData.need_money"}},[a("template",{slot:"append"},[e._v("元")])],2)],1)]:e._e(),1==e.formData.type?a("el-form-item",{attrs:{label:"物流配送",required:""}},[a("el-radio-group",{model:{value:e.formData.delivery_way,callback:function(t){e.$set(e.formData,"delivery_way",t)},expression:"formData.delivery_way"}},[a("el-radio",{attrs:{label:1}},[e._v("快递")]),a("el-radio",{attrs:{label:0}},[e._v("无需物流")])],1),a("div",{staticClass:"muted"},[e._v(" 修改后的配送状态仅对后面的订单生效，对前面已经付款的订单没影响，会按照订单当时的的设置来进行操作 ")])],1):e._e(),1==e.formData.type&&1==e.formData.delivery_way?a("el-form-item",{attrs:{label:"快递运费",required:""}},[a("el-radio-group",{model:{value:e.formData.express_type,callback:function(t){e.$set(e.formData,"express_type",t)},expression:"formData.express_type"}},[a("el-radio",{attrs:{label:1}},[e._v("包邮")]),a("el-radio",{attrs:{label:2}},[e._v("统一运费")])],1)],1):e._e(),2==e.formData.express_type&&1==e.formData.type?a("el-form-item",{attrs:{prop:"express_money"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入"},model:{value:e.formData.express_money,callback:function(t){e.$set(e.formData,"express_money",t)},expression:"formData.express_money"}},[a("template",{slot:"append"},[e._v("元")])],2)],1):e._e(),2==e.formData.type?a("el-form-item",{attrs:{label:"红包面值",prop:"balance"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入红包面值"},model:{value:e.formData.balance,callback:function(t){e.$set(e.formData,"balance",t)},expression:"formData.balance"}}),a("div",{staticClass:"muted"},[e._v("兑换的红包会以余额的形式发放")])],1):e._e(),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入"},model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",t)},expression:"formData.sort"}}),a("div",{staticClass:"muted"},[e._v("默认值为0,数值越大越排前")])],1),a("el-form-item",{attrs:{label:"商品状态"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}})],1)],2)],1),a("el-tab-pane",{attrs:{label:"商品详情",name:"detail"}},[a("editor",{model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content",t)},expression:"formData.content"}})],1)],1)],1),a("div",{staticClass:"bg-white ls-fixed-footer"},[a("div",{staticClass:"row-center flex",staticStyle:{height:"100%"}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$router.back()}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.onSubmit}},[e._v(" 保存 ")])],1)])])}),[],!1,null,"2dae5cbc",null);t.default=m.exports}}]);