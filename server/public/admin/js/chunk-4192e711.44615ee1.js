(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4192e711"],{"5ef8":function(a,t,e){"use strict";e.r(t);var i=e("9ab4"),n=e("1b40"),s=e("6460"),r=e("b3ad");let l=class extends n.e{constructor(){super(...arguments),this.identity=0,this.status="",this.paymentConfigData={name:"",icon:"",sort:"",remark:"",merchant_type:"",interface_version:"v2",mch_id:"",pay_sign_key:"",apiclient_cert:"",apiclient_key:"",pattern:"",app_id:"",private_key:"",ali_public_key:""},this.rules={name:[{required:!0,message:"请输入显示名称",trigger:"blur"}],icon:[{required:!0,message:"请输入上传图标",trigger:"change"}],mch_id:[{required:!0,message:"请输入微信支付商户号",trigger:"blur"}],pay_sign_key:[{required:!0,message:"请输入微信商户支付API密钥",trigger:"blur"}],apiclient_cert:[{required:!0,message:"请输入微信支付证书",trigger:"blur"}],apiclient_key:[{required:!0,message:"请输入微信支付证书密钥",trigger:"blur"}],private_key:[{required:!0,message:"请输入支付宝公钥",trigger:"blur"}],ali_public_key:[{required:!0,message:"请输入应用私钥",trigger:"blur"}],app_id:[{required:!0,message:"请输入应用ID",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",pattern:!1,message:"请输入正确的排序",trigger:"blur"}]}}getPaymentConfigDetail(){Object(s.a)({id:this.identity}).then(a=>{const t={...a.config,...a};delete t.config,2==t.pay_way&&(t.interface_version="v2"),3==t.pay_way&&(t.mode="normal_mode"),t.merchant_type="ordinary_merchant",this.paymentConfigData=t}).catch(()=>{this.$message.error("数据初始化失败，请刷新重载！")})}onSubmit(a){this.$refs[a].validate(a=>{if(a)return this.paymentConfigData.sort<=0?this.$message.error("请输入正整数"):void this.handlePayConfigEdit()})}handlePayConfigEdit(){const a=this.paymentConfigData,t=this.identity;Object(s.c)({...a,id:t}).then(()=>{setTimeout(()=>this.$router.go(-1),500)}).catch(()=>{this.$message.error("保存失败!")})}onCopy(){const a=document.createElement("input");a.value="http://xxx.com/pay/",document.body.appendChild(a),a.select(),document.execCommand("Copy"),a.style.display="none",this.$message({message:"复制成功",type:"success"})}created(){const a=this.$route.query;this.identity=a.id,this.getPaymentConfigDetail()}get PayWay(){switch(Number(this.paymentConfigData.pay_way)){case 1:return"余额支付";case 2:return"微信支付";case 3:return"支付宝支付";case 4:return"字节支付"}}};l=Object(i.a)([Object(n.a)({components:{MaterialSelect:r.a}})],l);var o=l,p=(e("97ea"),e("2877")),c=Object(p.a)(o,(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("div",{staticClass:"ls-card"},[e("el-page-header",{attrs:{content:"设置支付方式"},on:{back:function(t){return a.$router.go(-1)}}})],1),e("div",{staticClass:"ls-card m-t-24 m-b-60"},[e("div",{staticClass:"nr m-b-30 card-title"},[a._v("支付信息")]),e("el-form",{ref:"paymentConfigData",staticClass:"m-l-24",attrs:{"hide-required-asterisk":!1,rules:a.rules,model:a.paymentConfigData,"label-width":"120px",size:"small"}},[e("el-form-item",{attrs:{label:"支付方式","label-position":"right"}},[e("el-input",{staticClass:"ls-input",attrs:{disabled:!0},model:{value:a.PayWay,callback:function(t){a.PayWay=t},expression:"PayWay"}})],1),e("el-form-item",{attrs:{label:"显示名称",prop:"name","label-position":"right"}},[e("el-input",{staticClass:"ls-input",model:{value:a.paymentConfigData.name,callback:function(t){a.$set(a.paymentConfigData,"name",t)},expression:"paymentConfigData.name"}})],1),e("el-form-item",{attrs:{label:"显示图标",prop:"icon","label-position":"right"}},[e("material-select",{attrs:{limit:1,disabled:!1},model:{value:a.paymentConfigData.icon,callback:function(t){a.$set(a.paymentConfigData,"icon",t)},expression:"paymentConfigData.icon"}}),e("span",{staticClass:"desc"},[a._v("建议尺寸：152*42像素，支持jpg，jpeg，png格式")])],1),2==a.paymentConfigData.pay_way?e("el-form-item",{attrs:{prop:"interface_version",label:"微信支付接口版本","label-position":"right"}},[e("el-radio-group",{model:{value:a.paymentConfigData.interface_version,callback:function(t){a.$set(a.paymentConfigData,"interface_version",t)},expression:"paymentConfigData.interface_version"}},[e("el-radio",{attrs:{label:a.paymentConfigData.interface_version}})],1),e("span",{staticClass:"desc"},[a._v("暂时只支持V2版本")])],1):a._e(),2==a.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"商户类型",prop:"merchant_type","label-position":"right"}},[e("el-radio-group",{model:{value:a.paymentConfigData.merchant_type,callback:function(t){a.$set(a.paymentConfigData,"merchant_type",t)},expression:"paymentConfigData.merchant_type"}},[e("el-radio",{attrs:{label:a.paymentConfigData.merchant_type}},[a._v("普通商户")])],1),e("span",{staticClass:"desc"},[a._v("暂时只支持普通商户类型，服务商户类型模式暂不支持")])],1):a._e(),2==a.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"微信支付商户号",prop:"mch_id","label-position":"right"}},[e("el-input",{staticClass:"ls-input",model:{value:a.paymentConfigData.mch_id,callback:function(t){a.$set(a.paymentConfigData,"mch_id",t)},expression:"paymentConfigData.mch_id"}}),e("span",{staticClass:"desc"},[a._v("微信支付商户号（MCHID）")])],1):a._e(),2==a.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"商户API密钥",prop:"pay_sign_key","label-position":"right"}},[e("el-input",{staticClass:"ls-input",model:{value:a.paymentConfigData.pay_sign_key,callback:function(t){a.$set(a.paymentConfigData,"pay_sign_key",t)},expression:"paymentConfigData.pay_sign_key"}}),e("span",{staticClass:"desc"},[a._v("微信支付商户API密钥（paySignKey）")])],1):a._e(),2==a.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"微信支付证书",prop:"apiclient_cert","label-position":"right"}},[e("el-input",{staticClass:"ls-input",attrs:{type:"textarea",rows:4},model:{value:a.paymentConfigData.apiclient_cert,callback:function(t){a.$set(a.paymentConfigData,"apiclient_cert",t)},expression:"paymentConfigData.apiclient_cert"}}),e("span",{staticClass:"desc"},[a._v(" 微信支付证书（apiclient_cert.pem），前往微信商家平台生成并黏贴至此处 ")])],1):a._e(),2==a.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"微信支付证书密钥",prop:"apiclient_key","label-position":"right"}},[e("el-input",{staticClass:"ls-input",attrs:{type:"textarea",rows:4},model:{value:a.paymentConfigData.apiclient_key,callback:function(t){a.$set(a.paymentConfigData,"apiclient_key",t)},expression:"paymentConfigData.apiclient_key"}}),e("span",{staticClass:"desc"},[a._v(" 微信支付证书密钥（apiclient_key.pem），前往微信商家平台生成并黏贴至此处 ")])],1):a._e(),2==a.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"支付授权目录","label-position":"right"}},[e("div",[a._v(" "+a._s(a.paymentConfigData.domain)+" "),e("span",{staticClass:"copy",on:{click:a.onCopy}},[a._v("复制")])]),e("span",{staticClass:"desc"},[a._v("支付授权目录仅用于参考，复制后前往微信商家平台填写")])]):a._e(),3==a.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"模式",prop:"pattern","label-position":"right"}},[e("el-radio-group",{model:{value:a.paymentConfigData.pattern,callback:function(t){a.$set(a.paymentConfigData,"pattern",t)},expression:"paymentConfigData.pattern"}},[e("el-radio",{attrs:{label:a.paymentConfigData.pattern}},[a._v("普通模式")])],1),e("span",{staticClass:"desc"},[a._v("暂时仅支持支付宝普通模式")])],1):a._e(),3==a.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"商户类型",prop:"merchant_type","label-position":"right"}},[e("el-radio-group",{model:{value:a.paymentConfigData.merchant_type,callback:function(t){a.$set(a.paymentConfigData,"merchant_type",t)},expression:"paymentConfigData.merchant_type"}},[e("el-radio",{attrs:{label:a.paymentConfigData.merchant_type}},[a._v("普通商户")])],1),e("span",{staticClass:"desc"},[a._v("暂时只支持普通商户类型，服务商户类型模式暂不支持")])],1):a._e(),3==a.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"应用ID",prop:"app_id","label-position":"right"}},[e("el-input",{staticClass:"ls-input",model:{value:a.paymentConfigData.app_id,callback:function(t){a.$set(a.paymentConfigData,"app_id",t)},expression:"paymentConfigData.app_id"}}),e("span",{staticClass:"desc"},[a._v("支付宝应用APP_ID")])],1):a._e(),3==a.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"应用私钥",prop:"private_key","label-position":"right"}},[e("el-input",{staticClass:"ls-input",model:{value:a.paymentConfigData.private_key,callback:function(t){a.$set(a.paymentConfigData,"private_key",t)},expression:"paymentConfigData.private_key"}}),e("span",{staticClass:"desc"},[a._v("应用私钥（private_key）")])],1):a._e(),3==a.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"支付宝公钥",prop:"ali_public_key","label-position":"right"}},[e("el-input",{staticClass:"ls-input",model:{value:a.paymentConfigData.ali_public_key,callback:function(t){a.$set(a.paymentConfigData,"ali_public_key",t)},expression:"paymentConfigData.ali_public_key"}}),e("span",{staticClass:"desc"},[a._v("支付宝公钥（ali_public_key）")])],1):a._e(),e("el-form-item",{attrs:{label:"排序",prop:"sort","label-position":"right"}},[e("el-input",{staticClass:"ls-input",model:{value:a.paymentConfigData.sort,callback:function(t){a.$set(a.paymentConfigData,"sort",a._n(t))},expression:"paymentConfigData.sort"}}),e("span",{staticClass:"desc"},[a._v("排序值越小，排序越前")])],1)],1)],1),e("div",{staticClass:"bg-white ls-fixed-footer"},[e("div",{staticClass:"row-center flex m-t-15"},[e("el-button",{attrs:{size:"small"},on:{click:function(t){return a.$router.go(-1)}}},[a._v("取消")]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return a.onSubmit("paymentConfigData")}}},[a._v(" 保存 ")])],1)])])}),[],!1,null,"4f97c8b8",null);t.default=c.exports},"634b":function(a,t,e){},6460:function(a,t,e){"use strict";e.d(t,"d",(function(){return n})),e.d(t,"e",(function(){return s})),e.d(t,"c",(function(){return r})),e.d(t,"a",(function(){return l})),e.d(t,"b",(function(){return o}));var i=e("f175");const n=()=>i.a.get("/settings.pay.pay_way/getPayWay"),s=a=>i.a.post("/settings.pay.pay_way/setPayWay",a),r=a=>i.a.post("/settings.pay.pay_config/setConfig",a),l=a=>i.a.get("/settings.pay.pay_config/getConfig",{params:a}),o=()=>i.a.get("/settings.pay.pay_config/lists")},"97ea":function(a,t,e){"use strict";e("634b")}}]);