(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-704282a9"],{"03f4":function(e,t,s){},"06d5":function(e,t,s){"use strict";s("0b8f")},"0b8f":function(e,t,s){},"14c6":function(e,t,s){"use strict";s.d(t,"n",(function(){return l})),s.d(t,"x",(function(){return i})),s.d(t,"y",(function(){return o})),s.d(t,"u",(function(){return r})),s.d(t,"C",(function(){return n})),s.d(t,"v",(function(){return c})),s.d(t,"B",(function(){return u})),s.d(t,"w",(function(){return d})),s.d(t,"z",(function(){return p})),s.d(t,"A",(function(){return m})),s.d(t,"a",(function(){return v})),s.d(t,"e",(function(){return _})),s.d(t,"f",(function(){return g})),s.d(t,"b",(function(){return b})),s.d(t,"c",(function(){return f})),s.d(t,"d",(function(){return h})),s.d(t,"E",(function(){return y})),s.d(t,"H",(function(){return x})),s.d(t,"F",(function(){return k})),s.d(t,"G",(function(){return w})),s.d(t,"D",(function(){return C})),s.d(t,"L",(function(){return O})),s.d(t,"I",(function(){return $})),s.d(t,"J",(function(){return j})),s.d(t,"K",(function(){return S})),s.d(t,"g",(function(){return D})),s.d(t,"l",(function(){return I})),s.d(t,"h",(function(){return q})),s.d(t,"m",(function(){return B})),s.d(t,"i",(function(){return N})),s.d(t,"k",(function(){return z})),s.d(t,"j",(function(){return L})),s.d(t,"M",(function(){return E})),s.d(t,"P",(function(){return V})),s.d(t,"N",(function(){return T})),s.d(t,"O",(function(){return F})),s.d(t,"r",(function(){return M})),s.d(t,"q",(function(){return J})),s.d(t,"s",(function(){return A})),s.d(t,"t",(function(){return G})),s.d(t,"p",(function(){return H})),s.d(t,"o",(function(){return P}));var a=s("f175");const l=e=>a.a.post("/goods.goods/add",e),i=e=>a.a.post("/goods.goods/edit",e),o=e=>a.a.get("/goods.goods/lists",{params:e}),r=e=>a.a.get("/goods.goods/commonLists",{params:e}),n=e=>a.a.post("/goods.goods/status",e),c=e=>a.a.post("/goods.goods/del",e),u=e=>a.a.post("/goods.goods/sort",e),d=e=>a.a.get("/goods.goods/detail",{params:{id:e}}),p=e=>a.a.get("/goods.goods/otherList",{params:e}),m=e=>a.a.post("goods.goods/rename ",e),v=e=>a.a.post("/goods.goods_brand/add",e),_=e=>a.a.get("/goods.goods_brand/lists",{params:e}),g=e=>a.a.post("/goods.goods_brand/status",e),b=e=>a.a.post("/goods.goods_brand/del",e),f=e=>a.a.get("/goods.goods_brand/detail",{params:{id:e}}),h=e=>a.a.post("/goods.goods_brand/edit",e),y=e=>a.a.post("/goods.goods_supplier_category/add",e),x=e=>a.a.get("goods.goods_supplier_category/lists",{params:e}),k=e=>a.a.post("goods.goods_supplier_category/del",{id:e}),w=e=>a.a.post("goods.goods_supplier_category/edit",e),C=e=>a.a.post("/goods.goods_supplier/add",e),O=e=>a.a.get("/goods.goods_supplier/lists",{params:e}),$=e=>a.a.post("goods.goods_supplier/del",{id:e}),j=e=>a.a.get("/goods.goods_supplier/detail",{params:{id:e}}),S=e=>a.a.post("/goods.goods_supplier/edit",e),D=e=>a.a.post("/goods.goods_category/add",e),I=e=>a.a.get("/goods.goods_category/lists",{params:e}),q=e=>a.a.get("/goods.goods_category/commonLists",{params:e}),B=e=>a.a.post("/goods.goods_category/status",e),N=e=>a.a.post("goods.goods_category/del",{id:e}),z=e=>a.a.post("/goods.goods_category/edit",e),L=e=>a.a.get("/goods.goods_category/detail",{params:{id:e}}),E=e=>a.a.post("/goods.goods_unit/add",e),V=e=>a.a.get("/goods.goods_unit/lists",{params:e}),T=e=>a.a.post("goods.goods_unit/del",{id:e}),F=e=>a.a.post("/goods.goods_unit/edit",e),M=e=>a.a.get("goods.goods_comment/lists",{params:e}),J=e=>a.a.post("goods.goods_comment/del",e),A=e=>a.a.post("goods.goods_comment/reply",e),G=e=>a.a.post("/goods.goods_comment/status",e),H=e=>a.a.get("goods.goods_comment_assistant/lists",{params:e}),P=e=>a.a.post("goods.goods_comment_assistant/add",e)},4791:function(e,t,s){"use strict";s.r(t);var a=s("9ab4"),l=s("1b40"),i=s("b3ad");let o=class extends l.e{constructor(){super(...arguments),this.addVideo=!1,this.form={},this.fileList=[],this.goodsType=[{type:1,label:"实物商品",desc:"物流发货"},{type:2,label:"虚拟商品",desc:"虚拟发货"}]}videoChange(e){e&&(this.addVideo=!0)}get categoryList(){return this.lists.category_list||[]}get brandList(){return this.lists.brand_list||[]}get unitList(){return this.lists.unit_list||[]}get supplierList(){return this.lists.supplier_list||[]}created(){}};Object(a.a)([Object(l.c)()],o.prototype,"value",void 0),Object(a.a)([Object(l.c)({default:()=>({})})],o.prototype,"lists",void 0),Object(a.a)([Object(l.f)("value.video",{immediate:!0})],o.prototype,"videoChange",null),o=Object(a.a)([Object(l.a)({components:{MaterialSelect:i.a}})],o);var r=o,n=(s("d744"),s("2877")),c=Object(n.a)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"add-basic"},[s("el-form-item",{attrs:{label:"商品类型",required:"",prop:"type"}},[s("div",{staticClass:"flex goods-type"},e._l(e.goodsType,(function(t,a){return s("div",{key:a,class:{active:t.type==e.value.type,disabled:e.value.id},on:{click:function(s){!e.value.id&&(e.value.type=t.type)}}},[s("div",[e._v(e._s(t.label))]),s("div",{staticClass:"muted m-t-4"},[e._v(e._s(t.desc))])])})),0)]),s("el-form-item",{attrs:{label:"商品编码",required:"",prop:"code"}},[s("el-input",{staticStyle:{width:"460px"},attrs:{placeholder:"请输入商品编码"},model:{value:e.value.code,callback:function(t){e.$set(e.value,"code",t)},expression:"value.code"}})],1),s("el-form-item",{attrs:{label:"商品名称",required:"",prop:"name"}},[s("el-input",{staticStyle:{width:"460px"},attrs:{type:"textarea",maxlength:"64",rows:"3","show-word-limit":"",placeholder:"请输入商品名称"},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1),s("el-form-item",{attrs:{label:"商品分类",required:"",prop:"category_id"}},[s("el-cascader",{staticStyle:{width:"280px"},attrs:{options:e.categoryList,props:{multiple:!0,checkStrictly:!0,label:"name",value:"id",children:"sons",emitPath:!1},clearable:"",filterable:""},model:{value:e.value.category_id,callback:function(t){e.$set(e.value,"category_id",t)},expression:"value.category_id"}}),s("router-link",{staticClass:"m-l-10",attrs:{target:"_blank",to:"/goods/category_edit"}},[s("el-button",{attrs:{type:"text",size:"small"}},[e._v("新增分类")])],1),s("span",{staticClass:"primary m-8"},[e._v("|")]),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$emit("refresh")}}},[e._v("刷新")])],1),s("el-form-item",{attrs:{label:"商品轮播图",required:"",prop:"goods_image"}},[s("material-select",{attrs:{limit:10},model:{value:e.value.goods_image,callback:function(t){e.$set(e.value,"goods_image",t)},expression:"value.goods_image"}}),s("div",{staticClass:"muted"},[e._v("建议尺寸：800*800，可拖拽改变图片顺序，默认首张图为主图，最多上传10张")])],1),s("el-form-item",{attrs:{label:"添加视频"}},[s("el-switch",{model:{value:e.addVideo,callback:function(t){e.addVideo=t},expression:"addVideo"}})],1),e.addVideo?[s("el-form-item",{attrs:{label:"视频来源"}},[s("el-radio-group",{model:{value:e.value.video_source,callback:function(t){e.$set(e.value,"video_source",t)},expression:"value.video_source"}},[s("el-radio",{attrs:{label:1}},[e._v("视频素材库")]),s("el-radio",{attrs:{label:2}},[e._v("视频链接")])],1)],1),1==e.value.video_source?s("el-form-item",{attrs:{label:"选择视频",required:"",prop:"video"}},[s("material-select",{attrs:{type:"video"},model:{value:e.value.video,callback:function(t){e.$set(e.value,"video",t)},expression:"value.video"}}),s("div",{staticClass:"muted"},[e._v("手机端播放，建议时长：9-30秒，视频宽高比16:9")])],1):s("el-form-item",{attrs:{label:"视频链接",required:"",prop:"video"}},[s("el-input",{staticStyle:{width:"460px"},attrs:{placeholder:"请输入视频链接"},model:{value:e.value.video,callback:function(t){e.$set(e.value,"video",t)},expression:"value.video"}}),s("div",{staticClass:"muted"},[e._v("手机端播放，建议时长：9-30秒，视频宽高比16:9")])],1),s("el-form-item",{attrs:{label:"视频封面"}},[s("material-select",{model:{value:e.value.video_cover,callback:function(t){e.$set(e.value,"video_cover",t)},expression:"value.video_cover"}}),s("div",{staticClass:"muted"},[e._v("建议尺寸：800*800")])],1)]:e._e(),s("el-form-item",{attrs:{label:"商品品牌"}},[s("el-select",{attrs:{placeholder:"请选择品牌"},model:{value:e.value.brand_id,callback:function(t){e.$set(e.value,"brand_id",t)},expression:"value.brand_id"}},e._l(e.brandList,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),s("router-link",{staticClass:"m-l-10",attrs:{target:"_blank",to:"/goods/brand_edit"}},[s("el-button",{attrs:{type:"text",size:"small"}},[e._v("新增品牌")])],1),s("span",{staticClass:"primary m-8"},[e._v("|")]),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$emit("refresh")}}},[e._v("刷新")])],1),s("el-form-item",{attrs:{label:"商品单位"}},[s("el-select",{attrs:{placeholder:"请选择单位"},model:{value:e.value.unit_id,callback:function(t){e.$set(e.value,"unit_id",t)},expression:"value.unit_id"}},e._l(e.unitList,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),s("router-link",{staticClass:"m-l-10",attrs:{target:"_blank",to:"/goods/unit"}},[s("el-button",{attrs:{type:"text",size:"small"}},[e._v("新增单位")])],1),s("span",{staticClass:"primary m-8"},[e._v("|")]),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$emit("refresh")}}},[e._v("刷新")])],1),s("el-form-item",{attrs:{label:"供应商"}},[s("el-select",{attrs:{placeholder:"请选择供应商"},model:{value:e.value.supplier_id,callback:function(t){e.$set(e.value,"supplier_id",t)},expression:"value.supplier_id"}},e._l(e.supplierList,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),s("router-link",{staticClass:"m-l-10",attrs:{target:"_blank",to:"/goods/supplier/edit"}},[s("el-button",{attrs:{type:"text",size:"small"}},[e._v("新增供应商")])],1),s("span",{staticClass:"primary m-8"},[e._v("|")]),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$emit("refresh")}}},[e._v("刷新")])],1),s("el-form-item",{attrs:{label:"自定义分享海报"}},[s("material-select",{attrs:{limit:1},model:{value:e.value.poster,callback:function(t){e.$set(e.value,"poster",t)},expression:"value.poster"}}),s("div",{staticClass:"muted"},[e._v("建议尺寸：800*800")])],1)],2)}),[],!1,null,"75b3163b",null).exports,u=(s("caad"),s("d455")),d=s("6ddb");let p=class extends l.e{constructor(){super(...arguments),this.tableDataIndex=0,this.fileList=[],this.tableData=[],this.selectData=[]}get sepcItem(){return this.value.spec_value}get disabledBatchBtn(){return!this.selectData.length}defaultDataChange(e){this.tableData=e}sepcItemChange(e){this.setTableData()}tableDataChange(e){this.value.spec_value_list=e}addSpecItem(){this.sepcItem.length>=3||this.sepcItem.push({has_image:!1,id:"",name:"",spec_list:[{id:"",value:"",image:""}]})}removeSpecItem(e){if(this.sepcItem.length<=1)return this.$message.error("至少有一个规格项");this.sepcItem.splice(e,1)}addSpecValue(e){this.sepcItem[e].spec_list.push({id:"",value:"",image:""})}removeSpecValue(e,t){this.sepcItem[e].spec_list.splice(t,1)}addImage(e,t){this.sepcItem.forEach((s,a)=>{s.has_image=!1,e==a&&(s.has_image=t),s.spec_list.forEach(e=>{e.image=""})}),this.tableData.forEach(e=>{e.image=""})}checkValue(e,t){const s=this.sepcItem[e].spec_list[t].value;this.sepcItem[e].spec_list.forEach((a,l)=>{a.value&&t!=l&&a.value==s&&(this.sepcItem[e].spec_list[t].value="",this.$message({message:"已存在相同规格值",type:"warning"}))})}selectDataChange(e){this.selectData=e.map(e=>e.ids)}batchSetting(e,t){this.tableData.forEach(s=>{this.selectData.includes(s.ids)&&null!=s[t]&&(s[t]=e)})}setFields(e,t){let s=[e,t];s=s.filter(e=>void 0!==e.value);const a=Object(d.d)(s.map(e=>e.ids)).join(),l=Object(d.d)(s.map(e=>e.value));return{id:e.id?e.id:"",ids:a,value:l,spec_value_str:l.join(),image:e.image?e.image:t.image,sell_price:e.sell_price?e.sell_price:"",lineation_price:e.lineation_price?e.lineation_price:"",cost_price:e.cost_price?e.cost_price:"",stock:e.stock?e.stock:"",volume:e.volume?e.volume:"",weight:e.weight?e.weight:"",bar_code:e.bar_code?e.bar_code:""}}getTableData(e){return(e=JSON.parse(JSON.stringify(e))).reduce((e,t)=>{const s=[];for(let a=0;a<e.length;a++){t.length||s.push(this.setFields(e[a],{}));for(let l=0;l<t.length;l++)t[l].ids=l,s.push(this.setFields(e[a],t[l]))}return s},[{}])}setTableData(){const{tableData:e,sepcItem:t}=this,s=t.map(e=>e.spec_list),a=this.getTableData(s),l=JSON.parse(JSON.stringify(e)),i={};l.forEach(e=>{void 0!==e.spec_value_str&&(i[e.spec_value_str]=e)}),this.tableData=a.map(e=>i[e.spec_value_str]?{...i[e.spec_value_str],value:e.value,ids:e.ids,image:e.image||i[e.spec_value_str].image}:e)}addSpecImage(e){this.tableDataIndex=e,this.$refs.materialSelect.showDialog()}changeSpecImage(e){this.tableData[this.tableDataIndex].image=e}removeSpecImage(e){this.tableData[e].image=""}};Object(a.a)([Object(l.c)()],p.prototype,"value",void 0),Object(a.a)([Object(l.f)("value.spec_value_list")],p.prototype,"defaultDataChange",null),Object(a.a)([Object(l.f)("sepcItem",{deep:!0,immediate:!0})],p.prototype,"sepcItemChange",null),Object(a.a)([Object(l.f)("tableData",{deep:!0})],p.prototype,"tableDataChange",null),p=Object(a.a)([Object(l.a)({components:{MaterialSelect:i.a,PopoverInput:u.a}})],p);var m=p,v=(s("4fa4"),Object(n.a)(m,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"specification"},[s("el-form-item",{attrs:{label:""}},[s("div",[s("el-button",{attrs:{type:"primary",disabled:e.sepcItem.length>=3},on:{click:e.addSpecItem}},[e._v("添加规格项")]),s("span",{staticClass:"xs muted m-l-20"},[e._v("最多支持3个规格项")])],1),e._l(e.sepcItem,(function(t,a){return s("div",{key:a,staticClass:"spec-item flex p-16 m-t-16 col-top ls-del-wrap"},[s("div",{staticClass:"spec-item__label m-r-10 flex-none"},[e._v("规格名")]),s("div",{staticClass:"spec-item__content"},[s("div",[s("el-input",{staticStyle:{width:"240px"},attrs:{maxlength:"20","show-word-limit":""},model:{value:t.name,callback:function(s){e.$set(t,"name",s)},expression:"item.name"}}),s("el-checkbox",{staticClass:"m-l-16",on:{change:function(t){return e.addImage(a,t)}},model:{value:t.has_image,callback:function(s){e.$set(t,"has_image",s)},expression:"item.has_image"}},[e._v("添加规格图片")])],1),s("div",{staticClass:"flex flex-wrap col-top"},[e._l(t.spec_list,(function(l,i){return s("div",{key:i,staticClass:"m-r-10 m-t-10"},[s("div",{staticClass:"ls-del-wrap"},[s("el-input",{attrs:{maxlength:"50","show-word-limit":""},on:{blur:function(t){return e.checkValue(a,i)}},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"sitem.value"}}),s("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(t){return e.removeSpecValue(a,i)}}})],1),t.has_image?s("div",[s("material-select",{staticClass:"m-t-10",attrs:{size:"64"},model:{value:l.image,callback:function(t){e.$set(l,"image",t)},expression:"sitem.image"}})],1):e._e()])})),s("div",{staticClass:"m-t-10"},[s("el-button",{on:{click:function(t){return e.addSpecValue(a)}}},[e._v("+ 添加规格值")])],1)],2)]),s("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(t){return e.removeSpecItem(a)}}})])}))],2),e.tableData.length?s("el-form-item",{attrs:{label:"规格明细"}},[s("div",{staticClass:"ls-batch-setting m-b-16"},[s("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"sell_price")}}},[s("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置价格")])],1),s("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"lineation_price")}}},[s("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置划线价")])],1),s("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"cost_price")}}},[s("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置成本价")])],1),s("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"stock")}}},[s("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置库存")])],1),s("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"volume")}}},[s("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置体积")])],1),s("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"weight")}}},[s("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置重量")])],1),s("popover-input",{attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"bar_code")}}},[s("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置条码")])],1)],1),s("u-table",{attrs:{data:e.tableData,"use-virtual":"",size:"mini","max-height":"600","row-height":75,"tooltip-effect":"dark",border:!1,"big-data-checkbox":""},on:{"selection-change":e.selectDataChange}},[s("u-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.sepcItem,(function(t,a){return s("u-table-column",{key:a,attrs:{label:t.name,"min-width":"200","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.value[a])+" ")]}}],null,!0)})})),s("u-table-column",{attrs:{label:"规格图片","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.image?s("div",{staticClass:"spec-image ls-del-wrap m-t-8"},[s("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.row.image},on:{click:function(s){return e.addSpecImage(t.$index)}}}),s("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(s){return e.removeSpecImage(t.$index)}}})],1):s("div",{staticClass:"add-spec-image flex row-center",on:{click:function(s){return e.addSpecImage(t.$index)}}},[s("i",{staticClass:"el-icon-plus"})])]}}],null,!1,77801995)}),s("u-table-column",{attrs:{label:"","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:t.row.sell_price,callback:function(s){e.$set(t.row,"sell_price",s)},expression:"scope.row.sell_price"}})]}}],null,!1,2595813538)},[s("template",{slot:"header"},[s("span",{staticClass:"require-text"},[e._v("*")]),e._v(" 价格 ")])],2),s("u-table-column",{attrs:{"min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:t.row.lineation_price,callback:function(s){e.$set(t.row,"lineation_price",s)},expression:"scope.row.lineation_price"}})]}}],null,!1,806189223)},[s("template",{slot:"header"},[e._v(" 划线价 ")])],2),s("u-table-column",{attrs:{label:"成本价","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:t.row.cost_price,callback:function(s){e.$set(t.row,"cost_price",s)},expression:"scope.row.cost_price"}})]}}],null,!1,2095880351)}),s("u-table-column",{attrs:{"min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:t.row.stock,callback:function(s){e.$set(t.row,"stock",s)},expression:"scope.row.stock"}})]}}],null,!1,83199750)},[s("template",{slot:"header"},[s("span",{staticClass:"require-text"},[e._v("*")]),e._v(" 库存 ")])],2),s("u-table-column",{attrs:{"min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:t.row.volume,callback:function(s){e.$set(t.row,"volume",s)},expression:"scope.row.volume"}})]}}],null,!1,342924814)},[s("template",{slot:"header"},[e._v(" 体积 ")])],2),s("u-table-column",{attrs:{label:"重量","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:t.row.weight,callback:function(s){e.$set(t.row,"weight",s)},expression:"scope.row.weight"}})]}}],null,!1,2432239718)},[s("template",{slot:"header"},[e._v(" 重量 ")])],2),s("u-table-column",{attrs:{label:"条码","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:t.row.bar_code,callback:function(s){e.$set(t.row,"bar_code",s)},expression:"scope.row.bar_code"}})]}}],null,!1,3777856101)})],2)],1):e._e(),s("material-select",{ref:"materialSelect",attrs:{"hidden-trigger":!0},on:{change:e.changeSpecImage}})],1)}),[],!1,null,"36e55e3a",null).exports);let _=class extends l.e{mounted(){}};Object(a.a)([Object(l.c)()],_.prototype,"value",void 0),Object(a.a)([Object(l.c)()],_.prototype,"specData",void 0),_=Object(a.a)([Object(l.a)({components:{MaterialSelect:i.a,Specification:v}})],_);var g=_,b=(s("06d5"),Object(n.a)(g,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"add-price"},[s("el-form-item",{attrs:{label:"商品规格",required:""}},[s("el-radio-group",{model:{value:e.value.spec_type,callback:function(t){e.$set(e.value,"spec_type",t)},expression:"value.spec_type"}},[s("el-radio",{attrs:{label:1}},[e._v("单规格")]),s("el-radio",{attrs:{label:2}},[e._v("多规格")])],1)],1),s("specification",{directives:[{name:"show",rawName:"v-show",value:2==e.value.spec_type,expression:"value.spec_type == 2"}],model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.value.spec_type,expression:"value.spec_type == 1"}]},[s("el-form-item",{attrs:{label:"商品价格",required:"",prop:"spec_value_list[0].sell_price",rules:[{required:!0,message:"请输入商品金额",trigger:["blur","change"]}]}},[s("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.sell_price,callback:function(t){e.$set(e.value.specs_single,"sell_price",t)},expression:"value.specs_single.sell_price"}},[s("template",{slot:"append"},[e._v("元")])],2)],1),s("el-form-item",{attrs:{label:"划线价",prop:"spec_value_list[0].lineation_price"}},[s("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.lineation_price,callback:function(t){e.$set(e.value.specs_single,"lineation_price",t)},expression:"value.specs_single.lineation_price"}},[s("template",{slot:"append"},[e._v("元")])],2)],1),s("el-form-item",{attrs:{label:"成本价"}},[s("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.cost_price,callback:function(t){e.$set(e.value.specs_single,"cost_price",t)},expression:"value.specs_single.cost_price"}},[s("template",{slot:"append"},[e._v("元")])],2)],1),s("el-form-item",{attrs:{label:"库存",required:"",prop:"spec_value_list[0].stock",rules:[{required:!0,message:"请输入库存",trigger:["blur","change"]}]}},[s("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.stock,callback:function(t){e.$set(e.value.specs_single,"stock",t)},expression:"value.specs_single.stock"}})],1),s("el-form-item",{attrs:{label:"体积"}},[s("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.volume,callback:function(t){e.$set(e.value.specs_single,"volume",t)},expression:"value.specs_single.volume"}})],1),s("el-form-item",{attrs:{label:"重量"}},[s("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.weight,callback:function(t){e.$set(e.value.specs_single,"weight",t)},expression:"value.specs_single.weight"}})],1),s("el-form-item",{attrs:{label:"条码"}},[s("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.bar_code,callback:function(t){e.$set(e.value.specs_single,"bar_code",t)},expression:"value.specs_single.bar_code"}})],1)],1)],1)}),[],!1,null,"304bad0e",null).exports),f=s("a897");let h=class extends l.e{};Object(a.a)([Object(l.c)()],h.prototype,"value",void 0),h=Object(a.a)([Object(l.a)({components:{Editor:f.a}})],h);var y=h,x=(s("d1b1"),Object(n.a)(y,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"add-details"},[s("div",{staticClass:"flex col-stretch"},[s("el-form-item",{staticClass:"form-edit",attrs:{label:"商品详情"}},[s("editor",{attrs:{width:"375"},model:{value:e.value.content,callback:function(t){e.$set(e.value,"content",t)},expression:"value.content"}})],1),s("div",{staticClass:"preview m-l-30 flex-none"},[s("div",{staticClass:"title flex row-center"},[e._v("详情预览")]),s("div",{staticClass:"flex-1",staticStyle:{"min-height":"0"}},[s("el-scrollbar",{staticClass:"ls-scrollbar",staticStyle:{height:"100%"}},[s("div",{staticClass:"p-l-10 p-r-10",domProps:{innerHTML:e._s(e.value.content)}})])],1)])],1)])}),[],!1,null,"7b8ce7c2",null).exports);let k=class extends l.e{};Object(a.a)([Object(l.c)()],k.prototype,"value",void 0),k=Object(a.a)([l.a],k);var w=k,C=Object(n.a)(w,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"add-sales"},[s("el-form-item",{attrs:{label:"库存预警"}},[s("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.stock_warning,callback:function(t){e.$set(e.value,"stock_warning",t)},expression:"value.stock_warning"}}),s("div",{staticClass:"xs muted"},[e._v("设置最低库存预警值，不填或填0表示不做库存预警")])],1),s("el-form-item",{attrs:{label:"虚拟销量"}},[s("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.virtual_sales_num,callback:function(t){e.$set(e.value,"virtual_sales_num",t)},expression:"value.virtual_sales_num"}})],1),s("el-form-item",{attrs:{label:"虚拟浏览量"}},[s("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.virtual_click_num,callback:function(t){e.$set(e.value,"virtual_click_num",t)},expression:"value.virtual_click_num"}})],1),s("el-form-item",{attrs:{label:"商品状态",required:""}},[s("el-radio-group",{model:{value:e.value.status,callback:function(t){e.$set(e.value,"status",t)},expression:"value.status"}},[s("el-radio",{attrs:{label:1}},[e._v("立即上架")]),s("el-radio",{attrs:{label:0}},[e._v("放入仓库")])],1)],1)],1)}),[],!1,null,"35c0975a",null).exports;let O=class extends l.e{get freightList(){return this.lists.freight_list||[]}handleChange(e){this.value.delivery_content=e.trim()}};Object(a.a)([Object(l.c)()],O.prototype,"value",void 0),Object(a.a)([Object(l.c)({default:()=>({})})],O.prototype,"lists",void 0),O=Object(a.a)([l.a],O);var $=O,j=Object(n.a)($,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"add-logistics"},[1==e.value.type?[s("el-form-item",{attrs:{label:"物流支持",required:""}},[s("el-checkbox",{attrs:{"false-label":0,"true-label":1},model:{value:e.value.is_express,callback:function(t){e.$set(e.value,"is_express",t)},expression:"value.is_express"}},[e._v("快递发货")]),s("el-checkbox",{attrs:{"false-label":0,"true-label":1},model:{value:e.value.is_selffetch,callback:function(t){e.$set(e.value,"is_selffetch",t)},expression:"value.is_selffetch"}},[e._v("上门自提")])],1),s("el-form-item",{attrs:{label:"运费设置",required:""}},[s("el-radio-group",{model:{value:e.value.express_type,callback:function(t){e.$set(e.value,"express_type",t)},expression:"value.express_type"}},[s("el-radio",{attrs:{label:1}},[e._v("包邮")]),s("el-radio",{attrs:{label:2}},[e._v("统一运费")]),s("el-radio",{attrs:{label:3}},[e._v("运费模板")])],1)],1),2==e.value.express_type?s("el-form-item",{attrs:{prop:"express_money"}},[s("el-input",{model:{value:e.value.express_money,callback:function(t){e.$set(e.value,"express_money",t)},expression:"value.express_money"}},[s("template",{slot:"append"},[e._v("元")])],2)],1):e._e(),3==e.value.express_type?s("el-form-item",[s("el-select",{attrs:{placeholder:"请选择运费模板",prop:"express_template_id"},model:{value:e.value.express_template_id,callback:function(t){e.$set(e.value,"express_template_id",t)},expression:"value.express_template_id"}},e._l(e.freightList,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):e._e()]:2==e.value.type?[s("el-form-item",{attrs:{label:"配送方式",required:""}},[s("el-checkbox",{attrs:{"false-label":0,"true-label":1},model:{value:e.value.is_virtualdelivery,callback:function(t){e.$set(e.value,"is_virtualdelivery",t)},expression:"value.is_virtualdelivery"}},[e._v("虚拟发货")])],1),s("el-form-item",{attrs:{label:"买家付款后",required:""}},[s("el-radio-group",{model:{value:e.value.after_pay,callback:function(t){e.$set(e.value,"after_pay",t)},expression:"value.after_pay"}},[s("el-radio",{attrs:{label:1}},[e._v("自动发货")]),s("el-radio",{attrs:{label:2}},[e._v("手动发货")])],1)],1),s("el-form-item",{attrs:{label:"发货后",required:""}},[s("el-radio-group",{model:{value:e.value.after_delivery,callback:function(t){e.$set(e.value,"after_delivery",t)},expression:"value.after_delivery"}},[s("el-radio",{attrs:{label:1}},[e._v("自动完成订单")]),s("el-radio",{attrs:{label:2}},[e._v("需要买家确认收货")])],1)],1),s("el-form-item",{attrs:{label:"发货内容",required:"",prop:"delivery_content"}},[s("el-input",{staticStyle:{width:"460px"},attrs:{type:"textarea",rows:"8","show-word-limit":"",placeholder:"请输入发货内容"},on:{change:e.handleChange},model:{value:e.value.delivery_content,callback:function(t){e.$set(e.value,"delivery_content",t)},expression:"value.delivery_content"}})],1)]:e._e()],2)}),[],!1,null,null,null).exports,S=s("14c6");let D=class extends l.e{constructor(){super(...arguments),this.loading=!0,this.activeName="basic",this.otherList={supplier_list:[],category_list:[],brand_list:[],unit_list:[],freight_list:[]},this.requireFields=[{fields:["code","name","category_id","goods_image"],activeName:"basic"},{fields:["spec_value_list[0].sell_price","spec_value_list[0].stock"],activeName:"price"},{fields:["express_money","express_template_id","delivery_content"],activeName:"logistics"}],this.specData={spec_type:1,spec_value:[],spec_value_list:[],specs_single:{}},this.form={type:1,is_virtualdelivery:1,after_pay:1,after_delivery:1,delivery_content:"",name:"",code:"",category_id:[],express_type:1,express_money:"",express_template_id:"",video_source:1,video_cover:"",video:"",supplier_id:"",brand_id:"",unit_id:"",poster:"",is_express:1,is_selffetch:1,delivery_type:1,goods_image:[],spec_value_list:[{id:"",image:"",sell_price:"",lineation_price:"",cost_price:"",stock:"",volume:"",weight:"",bar_code:""}],stock_warning:"",virtual_sales_num:"",status:0,content:""},this.rules={name:[{required:!0,message:"请输入商品名称",trigger:["blur","change"]}],code:[{required:!0,message:"请输入商品编码",trigger:["blur","change"]}],category_id:[{type:"array",required:!0,message:"请选择分类",trigger:["blur","change"]}],goods_image:[{type:"array",required:!0,message:"请添加商品轮播图",trigger:["blur","change"]}],video:[{required:!0,message:"请添加视频",trigger:["blur","change"]}],express_money:[{required:!0,message:"请输入运费金额",trigger:["blur","change"]}],express_template_id:[{required:!0,message:"请选择运费模板",trigger:["blur","change"]}],delivery_content:[{required:!0,message:"请输入发货内容",trigger:["blur","change"]}]}}formChange(e){}specDataChange(e){if(this.form.spec_type=e.spec_type,1==e.spec_type)return this.form.spec_value_list=[e.specs_single],void(this.form.spec_value=[]);this.form.spec_value_list=e.spec_value_list,this.form.spec_value=e.spec_value}getGoodsDetail(){Object(S.w)(this.id).then(e=>{this.initData(e),this.form=e})}onNextStep(e=!0){switch(this.activeName){case"basic":this.activeName="price";break;case"price":this.activeName=e?"logistics":"basic";break;case"logistics":this.activeName=e?"details":"price";break;case"details":this.activeName=e?"sales":"logistics";break;case"sales":this.activeName="details"}}handleSave(){this.$refs.form.validate((e,t)=>{if(!e){const e=this.requireFields.find(e=>{for(const s of e.fields)if(t[s])return this.$message.error(t[s][0].message),!0});return e&&(this.activeName=e.activeName),!1}{const e=this.$loading({lock:!0,text:"保存中...",spinner:"el-icon-loading"});(this.id?Object(S.x)(this.form):Object(S.n)(this.form)).then(()=>{this.$router.go(-1)}).finally(()=>{e.close()})}})}initData(e={}){const t=[{has_image:!1,id:"",name:"",spec_list:[{id:"",value:"",image:""}]}],s=[{id:"",image:"",sell_price:"",lineation_price:"",cost_price:"",stock:"",volume:"",weight:"",bar_code:""}],a={spec_value:e.spec_value||t,spec_value_list:e.spec_value_list||s,spec_type:e.spec_type||1,specs_single:s[0]};a.spec_value.forEach(e=>{e.has_image=!1,e.spec_list.forEach(e=>{e.image=""})}),1==e.spec_type&&(a.spec_value=t,a.specs_single=e.spec_value_list[0]),Object.assign(this.specData,a),this.loading=!1}getGoodsOtherList(){Object(S.z)({type:"all"}).then(e=>{this.otherList=e})}created(){this.id=this.$route.query.id,this.getGoodsOtherList(),this.id?this.getGoodsDetail():this.initData()}};Object(a.a)([Object(l.f)("form",{deep:!0})],D.prototype,"formChange",null),Object(a.a)([Object(l.f)("specData",{deep:!0})],D.prototype,"specDataChange",null),D=Object(a.a)([Object(l.a)({components:{AddBasic:c,AddPrice:b,AddDetails:x,AddSales:C,AddLogistics:j}})],D);var I=D,q=(s("df30"),Object(n.a)(I,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ls-release"},[s("el-form",{ref:"form",staticClass:"ls-form",attrs:{"label-width":"120px",model:e.form,rules:e.rules,size:"small"}},[s("div",{staticClass:"ls-card ls-release__header"},[s("el-page-header",{attrs:{content:e.id?"编辑商品":"新增商品"},on:{back:function(t){return e.$router.go(-1)}}})],1),s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"ls-card ls-release__content m-t-16"},[s("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"基础设置",name:"basic"}},[s("add-basic",{attrs:{lists:e.otherList},on:{refresh:e.getGoodsOtherList},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),s("el-tab-pane",{attrs:{label:"价格库存",name:"price"}},[s("add-price",{model:{value:e.specData,callback:function(t){e.specData=t},expression:"specData"}})],1),s("el-tab-pane",{attrs:{label:1==e.form.type?"物流设置":"发货设置",name:"logistics"}},[s("add-logistics",{attrs:{lazy:"",lists:e.otherList},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),s("el-tab-pane",{attrs:{label:"商品详情",name:"details"}},[s("add-details",{attrs:{lazy:""},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),s("el-tab-pane",{attrs:{label:"销售设置",name:"sales"}},[s("add-sales",{attrs:{lazy:""},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)],1)],1),s("div",{staticClass:"ls-release__footer bg-white ls-fixed-footer"},[s("div",{staticClass:"btns row-center flex",staticStyle:{height:"100%"}},["basic"!=e.activeName?s("el-button",{attrs:{size:"small"},on:{click:function(t){return e.onNextStep(!1)}}},[e._v("上一步")]):e._e(),"sales"==e.activeName?s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSave}},[e._v("保存")]):e._e(),"sales"!=e.activeName?s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.onNextStep}},[e._v("下一步")]):e._e()],1)])])],1)}),[],!1,null,"44b00ab4",null));t.default=q.exports},"4fa4":function(e,t,s){"use strict";s("03f4")},"63be":function(e,t,s){},"71f1":function(e,t,s){},"7cf8":function(e,t,s){},"84f7":function(e,t,s){"use strict";s("63be")},"8a3d":function(e,t,s){},a897:function(e,t,s){"use strict";var a=s("9ab4"),l=s("1b40"),i=s("6fad"),o=s.n(i),r=s("b3ad"),n=s("6ddb"),c=s("d70b");let u=class extends l.e{constructor(){super(...arguments),this.firstData=!0,this.identify=""}get editStyle(){return this.width?{width:this.width+"px"}:{}}valueChange(e){this.firstData&&(this.firstData=!1,this.editor.txt.html(e))}handeleChange(e){e.forEach(e=>{this.editor.cmd.do("insertHTML",`<img src="${e}" style="max-width:100%;"/>`)})}created(){this.identify="editor-"+Object(n.g)(3)}mounted(){this.editor=new o.a("#"+this.identify),this.editor.config.height=this.height,this.editor.config.menus=this.menu,this.editor.config.menuTooltipPosition="down",this.editor.config.showFullScreen=!1,this.editor.config.showLinkImg=!1,this.editor.config.uploadImgShowBase64=!0,this.editor.config.zIndex=1,this.editor.config.uploadImgFromMedia=()=>{this.$refs.materialSelect.showDialog()},this.editor.config.onchange=e=>{this.$emit("input",e)},this.editor.config.uploadVideoServer=c.a.baseURL+"/adminapi/upload/video",this.editor.config.uploadVideoHeaders={token:this.$store.getters.token,version:c.a.version},this.editor.config.uploadVideoName="file",this.editor.config.uploadVideoHooks={fail:(e,t,s)=>{this.$message.error("上传视频失败")},timeout:e=>{this.$message.error("上传视频超时")},customInsert:(e,t)=>{1==t.code?e(t.data.uri):this.$message.error(t.msg)}},this.editor.create()}beforeDestroy(){this.editor.destroy()}};Object(a.a)([Object(l.c)()],u.prototype,"value",void 0),Object(a.a)([Object(l.c)({default:()=>["head","bold","fontSize","fontName","italic","underline","strikeThrough","indent","lineHeight","foreColor","link","list","justify","quote","emoticon","image","video","undo","redo"]})],u.prototype,"menu",void 0),Object(a.a)([Object(l.c)({default:600})],u.prototype,"height",void 0),Object(a.a)([Object(l.c)()],u.prototype,"width",void 0),Object(a.a)([Object(l.f)("value")],u.prototype,"valueChange",null),u=Object(a.a)([Object(l.a)({components:{MaterialSelect:r.a}})],u);var d=u,p=(s("84f7"),s("2877")),m=Object(p.a)(d,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ls-editor"},[t("div",{staticClass:"editor",style:[this.editStyle],attrs:{id:this.identify}}),t("material-select",{ref:"materialSelect",attrs:{limit:null,"hidden-trigger":!0},on:{change:this.handeleChange}})],1)}),[],!1,null,"00c8867e",null);t.a=m.exports},d1b1:function(e,t,s){"use strict";s("7cf8")},d744:function(e,t,s){"use strict";s("8a3d")},df30:function(e,t,s){"use strict";s("71f1")}}]);