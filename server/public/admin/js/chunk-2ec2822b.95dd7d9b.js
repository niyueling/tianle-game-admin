(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2ec2822b"],{"0d73":function(t,i,e){"use strict";e.r(i);var s=e("9ab4"),a=e("1b40"),r=e("4072");let n=class extends a.e{constructor(){super(...arguments),this.distributionData={ratio_data:[{level_id:1,item_id:1,self_ratio:10,first_ratio:10,second_ratio:10},{level_id:1,item_id:2,self_ratio:20,first_ratio:20,second_ratio:20},{level_id:4,item_id:1,self_ratio:30,first_ratio:30,second_ratio:30}],id:"",goods_id:"",rule:1,is_distribution:[]},this.goodsSelectData=[],this.rules={name:[{required:!0,message:"请输入优惠券名称",trigger:["blur","change"]}],money:[{required:!0,message:"请输入优惠券面额",trigger:["blur","change"]}],send_total:[{required:!0,message:"请输入发放数量",trigger:["blur","change"]}]}}submit(t){this.$refs[t].validate(t=>{t&&this.couponAdd()})}base(t){const i={goods_id:t.id||t.goods_id,is_distribution:t.is_distribution,rule:t.rule,ratio_data:[]};return Object.keys(t.ratio_data).map((e,s)=>{for(let e=0;e<t.ratio_data[s].items.length;e++){const a=t.ratio_data[s].items[e];i.ratio_data.push({level_id:a.level_id,item_id:a.item_id,self_ratio:a.self_ratio,first_ratio:a.first_ratio,second_ratio:a.second_ratio})}}),i}couponAdd(){const t=this.base(this.distributionData);Object(r.n)({...t}).then(t=>{this.$message.success("设置成功!"),setTimeout(()=>this.$router.go(-1),500)}).catch(()=>{this.$message.error("设置失败!")})}getCouponInfo(){Object(r.k)({id:this.id}).then(t=>{this.distributionData={...t}})}created(){this.id=this.$route.query.id,this.id&&this.getCouponInfo()}};n=Object(s.a)([a.a],n);var o=n,d=(e("b83e"),e("2877")),u=Object(d.a)(o,(function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"ls-coupon-edit"},[e("div",{staticClass:"ls-card ls-coupon-edit__header"},[e("el-page-header",{attrs:{content:"设置分销佣金"},on:{back:function(i){return t.$router.go(-1)}}})],1),e("div",{staticClass:"ls-card ls-coupon-edit__form m-t-10"},[e("div",{staticClass:"nr weight-500 m-b-20"},[t._v("商品信息")]),e("el-form",{ref:"distributionData",attrs:{model:t.distributionData,"label-width":"120px",size:"small"}},[e("el-form-item",{attrs:{label:"商品编号",prop:"",required:""}},[[t._v(" "+t._s(t.distributionData.code)+" ")]],2),e("el-form-item",{attrs:{label:"商品图片",prop:"",required:""}},[[e("el-image",{staticClass:"flex-none",staticStyle:{width:"58px",height:"58px"},attrs:{src:t.distributionData.image}})]],2),e("el-form-item",{attrs:{label:"商品名称",prop:"",required:""}},[[t._v(" "+t._s(t.distributionData.name)+" ")]],2)],1)],1),e("div",{staticClass:"ls-card ls-coupon-edit__form m-t-10 m-b-50"},[e("div",{staticClass:"nr weight-500 m-b-20"},[t._v("佣金设置")]),e("el-form",{ref:"distributionData",attrs:{model:t.distributionData,"label-width":"120px",size:"small"}},[e("el-form-item",{attrs:{label:"分销状态",required:""}},[e("el-radio",{attrs:{label:1},model:{value:t.distributionData.is_distribution,callback:function(i){t.$set(t.distributionData,"is_distribution",i)},expression:"distributionData.is_distribution"}},[t._v("参与分销")]),e("el-radio",{attrs:{label:0},model:{value:t.distributionData.is_distribution,callback:function(i){t.$set(t.distributionData,"is_distribution",i)},expression:"distributionData.is_distribution"}},[t._v("不参与分销")]),e("span",{staticClass:"desc"},[t._v("是否参与分销，选择不参与分销将不产生分销佣金")])],1),e("el-form-item",{attrs:{label:"佣金规则",required:""}},[e("el-radio",{attrs:{label:1},model:{value:t.distributionData.rule,callback:function(i){t.$set(t.distributionData,"rule",i)},expression:"distributionData.rule"}},[t._v("默认分销等级佣金规则")]),e("el-radio",{attrs:{label:2},model:{value:t.distributionData.rule,callback:function(i){t.$set(t.distributionData,"rule",i)},expression:"distributionData.rule"}},[t._v("单独设置")]),e("el-table",{ref:"paneTable",staticClass:"m-t-24",staticStyle:{width:"100%"},attrs:{"cell-style":{background:"#fff"},data:t.distributionData.ratio_data,size:"mini"}},[e("el-table-column",{attrs:{prop:"name_desc",label:"分销等级","min-width":"140"}}),e("el-table-column",{attrs:{label:"商品规格","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-table",{staticClass:"tab-item",staticStyle:{width:"100%"},attrs:{data:t.row.items,"show-header":!1,size:"mini"}},[e("el-table-column",{attrs:{prop:"spec_value_str"}})],1)]}}])}),e("el-table-column",{attrs:{label:"价格","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-table",{staticClass:"tab-item",staticStyle:{width:"100%"},attrs:{data:t.row.items,"show-header":!1,size:"mini"}},[e("el-table-column",{attrs:{prop:"sell_price"}})],1)]}}])}),e("el-table-column",{attrs:{label:"自购佣金比例(%)","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-table",{staticClass:"tab-item",staticStyle:{width:"100%"},attrs:{data:i.row.items,"show-header":!1,size:"mini"}},[e("el-table-column",{attrs:{prop:"self_ratio"},scopedSlots:t._u([{key:"default",fn:function(s){return[1==t.distributionData.rule?e("span",[t._v(t._s(s.row.self_ratio))]):e("el-input",{staticStyle:{width:"50px",height:"10px"},attrs:{placeholder:"请输入内容"},model:{value:t.distributionData.ratio_data[i.$index].items[s.$index].self_ratio,callback:function(e){t.$set(t.distributionData.ratio_data[i.$index].items[s.$index],"self_ratio",e)},expression:"\n                                                distributionData.ratio_data[scope.$index].items[scopes.$index]\n                                                    .self_ratio\n                                            "}})]}}],null,!0)})],1)]}}])}),e("el-table-column",{attrs:{label:"一级佣金比例(%)","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-table",{staticClass:"tab-item",staticStyle:{width:"100%"},attrs:{data:i.row.items,"show-header":!1,"highlight-current-row":!1,size:"mini"}},[e("el-table-column",{attrs:{prop:"first_ratio"},scopedSlots:t._u([{key:"default",fn:function(s){return[1==t.distributionData.rule?e("span",[t._v(t._s(s.row.first_ratio))]):e("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.distributionData.ratio_data[i.$index].items[s.$index].first_ratio,callback:function(e){t.$set(t.distributionData.ratio_data[i.$index].items[s.$index],"first_ratio",e)},expression:"\n                                                distributionData.ratio_data[scope.$index].items[scopes.$index]\n                                                    .first_ratio\n                                            "}})]}}],null,!0)})],1)]}}])}),e("el-table-column",{attrs:{label:"二级佣金比例(%)","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-table",{staticClass:"tab-item",staticStyle:{width:"100%"},attrs:{data:i.row.items,"show-header":!1,size:"mini"}},[e("el-table-column",{attrs:{prop:"second_ratio"},scopedSlots:t._u([{key:"default",fn:function(s){return[1==t.distributionData.rule?e("span",[t._v(t._s(s.row.second_ratio))]):e("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.distributionData.ratio_data[i.$index].items[s.$index].second_ratio,callback:function(e){t.$set(t.distributionData.ratio_data[i.$index].items[s.$index],"second_ratio",e)},expression:"\n                                                distributionData.ratio_data[scope.$index].items[scopes.$index]\n                                                    .second_ratio\n                                            "}})]}}],null,!0)})],1)]}}])})],1)],1)],1)],1),e("div",{staticClass:"ls-coupon-edit__footer bg-white ls-fixed-footer"},[e("div",{staticClass:"btns row-center flex",staticStyle:{height:"100%"}},[e("el-button",{attrs:{size:"small"},on:{click:function(i){return t.$router.go(-1)}}},[t._v("取消")]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){return t.submit("distributionData")}}},[t._v("保存")])],1)])])}),[],!1,null,"7963c2fb",null);i.default=u.exports},"2e3d":function(t,i,e){},4072:function(t,i,e){"use strict";e.d(i,"f",(function(){return a})),e.d(i,"z",(function(){return r})),e.d(i,"A",(function(){return n})),e.d(i,"m",(function(){return o})),e.d(i,"l",(function(){return d})),e.d(i,"k",(function(){return u})),e.d(i,"n",(function(){return l})),e.d(i,"u",(function(){return c})),e.d(i,"t",(function(){return b})),e.d(i,"c",(function(){return _})),e.d(i,"d",(function(){return m})),e.d(i,"e",(function(){return f})),e.d(i,"v",(function(){return p})),e.d(i,"y",(function(){return h})),e.d(i,"b",(function(){return g})),e.d(i,"a",(function(){return v})),e.d(i,"g",(function(){return w})),e.d(i,"i",(function(){return x})),e.d(i,"j",(function(){return D})),e.d(i,"s",(function(){return $})),e.d(i,"q",(function(){return y})),e.d(i,"r",(function(){return k})),e.d(i,"o",(function(){return C})),e.d(i,"p",(function(){return S})),e.d(i,"w",(function(){return z})),e.d(i,"h",(function(){return q})),e.d(i,"x",(function(){return j}));var s=e("f175");const a=()=>s.a.get("/distribution.distribution_data/dataCenter"),r=t=>s.a.get("/distribution.distribution_data/topMemberEarnings",{params:t}),n=t=>s.a.get("/distribution.distribution_data/topMemberFans",{params:t}),o=t=>s.a.get("/distribution.distribution_goods/lists",{params:t}),d=t=>s.a.post("/distribution.distribution_goods/join",t),u=t=>s.a.get("/distribution.distribution_goods/detail",{params:t}),l=t=>s.a.post("/distribution.distribution_goods/set",t),c=t=>s.a.get("/distribution.distribution_member/lists",{params:t}),b=t=>s.a.get("/distribution.distribution_apply/detail",{params:t}),_=t=>s.a.get("/distribution.distribution_apply/lists",{params:t}),m=t=>s.a.post("/distribution.distribution_apply/pass",t),f=t=>s.a.post("/distribution.distribution_apply/refuse",t),p=t=>s.a.post("/distribution.distribution_member/open",t),h=t=>s.a.post("/distribution.distribution_member/freeze",t),g=t=>s.a.get("/distribution.distribution_member/adjustLevelInfo",{params:t}),v=t=>s.a.post("/distribution.distribution_member/adjustLevel",t),w=t=>s.a.get("/distribution.distribution_member/detail",{params:t}),x=t=>s.a.get("/distribution.distribution_member/getFans",{params:t}),D=t=>s.a.get("/distribution.distribution_member/getFansLists",{params:t}),$=t=>s.a.get("/distribution.distribution_level/lists",t),y=t=>s.a.get("/distribution.distribution_level/detail",{params:t}),k=t=>s.a.post("/distribution.distribution_level/edit",t),C=t=>s.a.post("/distribution.distribution_level/add",t),S=t=>s.a.post("/distribution.distribution_level/delete",t),z=t=>s.a.get("/distribution.distribution_order_goods/lists",{params:t}),q=t=>s.a.get("/distribution.distribution_config/getConfig",{params:t}),j=t=>s.a.post("/distribution.distribution_config/setConfig",t)},b83e:function(t,i,e){"use strict";e("2e3d")}}]);