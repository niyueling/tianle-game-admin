(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-51e9a8af"],{1914:function(t,e,i){},"4d86":function(t,e,i){"use strict";i("1914")},"63be":function(t,e,i){},"84f7":function(t,e,i){"use strict";i("63be")},a897:function(t,e,i){"use strict";var s=i("9ab4"),o=i("1b40"),r=i("6fad"),a=i.n(r),l=i("b3ad"),n=i("6ddb"),c=i("d70b");let d=class extends o.e{constructor(){super(...arguments),this.firstData=!0,this.identify=""}get editStyle(){return this.width?{width:this.width+"px"}:{}}valueChange(t){this.firstData&&(this.firstData=!1,this.editor.txt.html(t))}handeleChange(t){t.forEach(t=>{this.editor.cmd.do("insertHTML",`<img src="${t}" style="max-width:100%;"/>`)})}created(){this.identify="editor-"+Object(n.g)(3)}mounted(){this.editor=new a.a("#"+this.identify),this.editor.config.height=this.height,this.editor.config.menus=this.menu,this.editor.config.menuTooltipPosition="down",this.editor.config.showFullScreen=!1,this.editor.config.showLinkImg=!1,this.editor.config.uploadImgShowBase64=!0,this.editor.config.zIndex=1,this.editor.config.uploadImgFromMedia=()=>{this.$refs.materialSelect.showDialog()},this.editor.config.onchange=t=>{this.$emit("input",t)},this.editor.config.uploadVideoServer=c.a.baseURL+"/adminapi/upload/video",this.editor.config.uploadVideoHeaders={token:this.$store.getters.token,version:c.a.version},this.editor.config.uploadVideoName="file",this.editor.config.uploadVideoHooks={fail:(t,e,i)=>{this.$message.error("上传视频失败")},timeout:t=>{this.$message.error("上传视频超时")},customInsert:(t,e)=>{1==e.code?t(e.data.uri):this.$message.error(e.msg)}},this.editor.create()}beforeDestroy(){this.editor.destroy()}};Object(s.a)([Object(o.c)()],d.prototype,"value",void 0),Object(s.a)([Object(o.c)({default:()=>["head","bold","fontSize","fontName","italic","underline","strikeThrough","indent","lineHeight","foreColor","link","list","justify","quote","emoticon","image","video","undo","redo"]})],d.prototype,"menu",void 0),Object(s.a)([Object(o.c)({default:600})],d.prototype,"height",void 0),Object(s.a)([Object(o.c)()],d.prototype,"width",void 0),Object(s.a)([Object(o.f)("value")],d.prototype,"valueChange",null),d=Object(s.a)([Object(o.a)({components:{MaterialSelect:l.a}})],d);var u=d,f=(i("84f7"),i("2877")),m=Object(f.a)(u,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ls-editor"},[e("div",{staticClass:"editor",style:[this.editStyle],attrs:{id:this.identify}}),e("material-select",{ref:"materialSelect",attrs:{limit:null,"hidden-trigger":!0},on:{change:this.handeleChange}})],1)}),[],!1,null,"00c8867e",null);e.a=m.exports},ea4a:function(t,e,i){"use strict";i.d(e,"l",(function(){return o})),i.d(e,"h",(function(){return r})),i.d(e,"i",(function(){return a})),i.d(e,"j",(function(){return l})),i.d(e,"a",(function(){return n})),i.d(e,"k",(function(){return c})),i.d(e,"g",(function(){return d})),i.d(e,"c",(function(){return u})),i.d(e,"d",(function(){return f})),i.d(e,"e",(function(){return m})),i.d(e,"b",(function(){return h})),i.d(e,"f",(function(){return p}));var s=i("f175");const o=t=>s.a.get("/article/lists",{params:t}),r=t=>s.a.post("/article/delete",t),a=t=>s.a.get("/article/detail",{params:t}),l=t=>s.a.post("/article/edit",t),n=t=>s.a.post("/article/add",t),c=t=>s.a.post("/article/isShow",t),d=t=>s.a.get("/article_category/lists",{params:t}),u=t=>s.a.post("/article_category/delete",t),f=t=>s.a.get("/article_category/detail",{params:t}),m=t=>s.a.post("/article_category/edit",t),h=t=>s.a.post("/article_category/add",t),p=t=>s.a.post("/article_category/isShow",t)},fd1d:function(t,e,i){"use strict";i.r(e);var s=i("9ab4"),o=i("1b40"),r=i("ea4a"),a=i("b3ad"),l=i("a897"),n=i("4201");let c=class extends o.e{constructor(){super(...arguments),this.mode=n.f.ADD,this.categoryList=[],this.form={id:0,title:"",cid:"",synopsis:"",image:"",content:"",sort:0,is_show:1},this.rules={title:[{required:!0,message:"请输入文章标题",trigger:"blur"}],cid:[{required:!0,message:"请选择文章分类",trigger:"change"}],content:[{required:!0,message:"请输入文章标题",trigger:"blur"}]}}onSubmit(t){this.$refs[t].validate(t=>{if(t)switch(this.mode){case n.f.ADD:return this.handleArticleAdd();case n.f.EDIT:return this.handleArticleEdit()}})}handleArticleAdd(){Object(r.a)(this.form).then(()=>{setTimeout(()=>this.$router.go(-1),500)})}handleArticleEdit(){Object(r.j)(this.form).then(()=>{setTimeout(()=>this.$router.go(-1),500)})}initArticleEdit(){Object(r.i)({id:this.form.id}).then(t=>{Object.keys(t).map(e=>{this.$set(this.form,e,t[e])})})}initCategoryLists(){Object(r.g)({}).then(t=>{this.categoryList=t.lists})}created(){const t=this.$route.query;t.mode&&(this.mode=t.mode),this.initCategoryLists(),this.mode===n.f.EDIT&&(this.form.id=1*t.id,this.initArticleEdit())}};c=Object(s.a)([Object(o.a)({components:{LsEditor:l.a,MaterialSelect:a.a}})],c);var d=c,u=(i("4d86"),i("2877")),f=Object(u.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"substance_edit-help"},[i("div",{staticClass:"ls-card"},[i("el-page-header",{attrs:{content:"add"==t.mode?"添加资讯":"编辑资讯"},on:{back:function(e){return t.$router.go(-1)}}})],1),i("div",{staticClass:"ls-card m-t-16 form-container"},[i("div",{staticClass:"form-left"},[i("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[i("el-input",{staticClass:"ls-input",attrs:{"show-word-limit":"",placeholder:"请输入文章标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"文章分类",prop:"cid"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.cid,callback:function(e){t.$set(t.form,"cid",e)},expression:"form.cid"}},t._l(t.categoryList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-form-item",{attrs:{label:"文章简介",prop:"synopsis"}},[i("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入简介"},model:{value:t.form.synopsis,callback:function(e){t.$set(t.form,"synopsis",e)},expression:"form.synopsis"}})],1),i("el-form-item",{attrs:{label:"文章封面",prop:"image"}},[i("material-select",{attrs:{limit:1},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}}),i("div",{staticClass:"muted xs"},[t._v("建议尺寸：240*180像素")])],1),i("el-form-item",{attrs:{label:"排序",prop:"sort"}},[i("el-input",{staticClass:"ls-input",attrs:{type:"number",placeholder:"请输入排序值"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",t._n(e))},expression:"form.sort"}}),i("div",{staticClass:"muted xs"},[t._v("默认为0，数值越大越排在前面")])],1),i("el-form-item",{attrs:{label:"文章状态",prop:"is_show"}},[i("el-radio",{attrs:{label:1},model:{value:t.form.is_show,callback:function(e){t.$set(t.form,"is_show",e)},expression:"form.is_show"}},[t._v("显示")]),i("el-radio",{attrs:{label:0},model:{value:t.form.is_show,callback:function(e){t.$set(t.form,"is_show",e)},expression:"form.is_show"}},[t._v("隐藏")])],1)],1)],1),i("div",{staticClass:"form-right"},[i("el-form",{attrs:{rules:t.rules,"label-width":"120px",size:"small"}},[i("el-form-item",{staticClass:"form-edit",attrs:{label:"文章内容",prop:"content"}},[i("ls-editor",{model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1)],1)]),i("div",{staticClass:"bg-white ls-fixed-footer"},[i("div",{staticClass:"row-center flex",staticStyle:{height:"100%"}},[i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v("保存")])],1)])])}),[],!1,null,"36cfe33e",null);e.default=f.exports}}]);