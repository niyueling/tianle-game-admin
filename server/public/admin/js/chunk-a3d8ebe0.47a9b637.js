(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a3d8ebe0"],{2322:function(t,e,s){"use strict";s.d(e,"d",(function(){return i})),s.d(e,"c",(function(){return l})),s.d(e,"f",(function(){return r})),s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return o})),s.d(e,"e",(function(){return c}));var a=s("f175");const i=t=>a.a.get("/marketing.discount/lists",{params:t}),l=t=>a.a.post("/marketing.discount/join",t),r=t=>a.a.post("/marketing.discount/quit",t),n=t=>a.a.get("/marketing.discount/detail",{params:t}),o=t=>a.a.post("/marketing.discount/setDiscount",t),c=t=>a.a.get("/marketing.discount/otherLists",{params:t})},"2d19":function(t,e,s){"use strict";s.r(e);var a=s("9ab4"),i=s("1b40"),l=s("0a6d"),r=s("3c50"),n=s("6ddb"),o=s("2322");let c=class extends i.e{constructor(){super(...arguments),this.apiMemberPriceLists=o.d,this.selectIds=[],this.formData={name:"",status:"",goods_type:"",discount:""},this.statusList=[],this.typeList=[],this.discountList=[],this.pager=new n.a}get disabledBtn(){return!this.selectIds.length}onSearch(){this.pager.page=1,this.getMemberPriceList()}resetSearch(){Object.keys(this.formData).map(t=>{this.$set(this.formData,t,"")}),this.getMemberPriceList()}getMemberPriceList(){this.pager.request({callback:o.d,params:{...this.formData}}).catch(()=>{this.$message.error("数据请求失败，刷新重载！")})}getOtherLists(){Object(o.e)({}).then(t=>{this.statusList=t.status_list,this.typeList=t.type_list,this.discountList=t.discount_list})}handleSelectionChange(t){this.selectIds=t.map(t=>t.id)}handleBatchParticipate(t){Object(o.c)({goods_ids:Array.isArray(t)?t:this.selectIds}).then(()=>{this.getMemberPriceList()})}handleBatchNoParticipate(t){Object(o.f)({goods_ids:Array.isArray(t)?t:this.selectIds}).then(()=>{this.getMemberPriceList()})}created(){this.getMemberPriceList(),this.getOtherLists()}};c=Object(a.a)([Object(i.a)({components:{LsDialog:l.a,LsPagination:r.a}})],c);var d=c,u=s("2877"),m=Object(u.a)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"member_price"},[s("div",{staticClass:"ls-card"},[s("el-alert",{staticClass:"xxl",attrs:{title:"温馨提示：默认根据会员等级设置的会员折扣自动打折，可以单独设置会员价，拼团和秒杀等营销活动设置参与会员价但是不生效",type:"info",closable:!1,"show-icon":""}}),s("div",{staticClass:"m-t-15"},[s("el-form",{ref:"formRef",staticClass:"ls-form",attrs:{inline:"",model:t.formData,"label-width":"80px",size:"small"}},[s("el-form-item",{attrs:{label:"商品名称"}},[s("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),s("el-form-item",{attrs:{label:"商品状态"}},[s("el-select",{attrs:{placeholder:"全部"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},t._l(t.statusList,(function(t,e){return s("div",{key:e},[s("el-option",{attrs:{label:t,value:e}})],1)})),0)],1),s("el-form-item",{attrs:{label:"商品类型"}},[s("el-select",{attrs:{placeholder:"全部"},model:{value:t.formData.goods_type,callback:function(e){t.$set(t.formData,"goods_type",e)},expression:"formData.goods_type"}},t._l(t.typeList,(function(t,e){return s("div",{key:e},[s("el-option",{attrs:{label:t,value:e}})],1)})),0)],1),s("el-form-item",{attrs:{label:"参与折扣"}},[s("el-select",{attrs:{placeholder:"全部"},model:{value:t.formData.discount,callback:function(e){t.$set(t.formData,"discount",e)},expression:"formData.discount"}},t._l(t.discountList,(function(t,e){return s("div",{key:e},[s("el-option",{attrs:{label:t,value:e}})],1)})),0)],1),s("el-form-item",[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.onSearch}},[t._v(" 查询 ")]),s("el-button",{attrs:{size:"small"},on:{click:t.resetSearch}},[t._v(" 重置 ")])],1)],1)],1)],1),s("div",{staticClass:"ls-card m-t-15"},[s("div",[s("ls-dialog",{staticClass:"inline m-l-10",attrs:{content:"确定批量参与折扣？请谨慎操作。",disabled:t.disabledBtn},on:{confirm:t.handleBatchParticipate}},[s("el-button",{attrs:{slot:"trigger",size:"small",disabled:t.disabledBtn},slot:"trigger"},[t._v(" 参与折扣 ")])],1),s("ls-dialog",{staticClass:"inline m-l-10",attrs:{content:"确定批量取消参与折扣？请谨慎操作。",disabled:t.disabledBtn},on:{confirm:t.handleBatchNoParticipate}},[s("el-button",{attrs:{slot:"trigger",size:"small",disabled:t.disabledBtn},slot:"trigger"},[t._v(" 取消参与 ")])],1)],1),s("div",{staticClass:"list-table m-t-16"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.pager.loading,expression:"pager.loading"}],staticStyle:{width:"100%"},attrs:{data:t.pager.lists,size:"mini","header-cell-style":{background:"#f5f8ff"}},on:{"selection-change":t.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{prop:"image",label:"商品名称",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"flex"},[s("el-image",{staticClass:"flex-none",staticStyle:{width:"58px",height:"58px"},attrs:{src:e.row.image}}),s("div",{staticClass:"goods-info m-l-8"},[s("div",{staticClass:"line-2"},[t._v(" "+t._s(e.row.name)+" ")]),2==e.row.spec_type?s("el-tag",{attrs:{size:"mini"}},[t._v(" 多规格 ")]):t._e()],1)],1)]}}])}),s("el-table-column",{attrs:{prop:"price",label:"价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",[t._v("¥"+t._s(e.row.price))])]}}])}),s("el-table-column",{attrs:{prop:"total_stock",label:"库存"}}),s("el-table-column",{attrs:{prop:"sales_num",label:"销量"}}),s("el-table-column",{attrs:{prop:"status_desc",label:"商品状态"}}),s("el-table-column",{attrs:{prop:"is_discount",label:"参与折扣"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(1==e.row.is_discount?"参与":"不参与"))])]}}])}),s("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return t.$router.push({path:"/member_price/edit",query:{id:e.row.id}})}}},[t._v(" 设置会员价 ")]),0==e.row.is_discount?s("ls-dialog",{staticClass:"m-l-10 inline",attrs:{content:"是否确认商品参与会员折扣？"},on:{confirm:function(s){return t.handleBatchParticipate([e.row.id])}}},[s("el-button",{attrs:{slot:"trigger",type:"text",size:"small"},slot:"trigger"},[t._v(" 参与 ")])],1):t._e(),1==e.row.is_discount?s("ls-dialog",{staticClass:"m-l-10 inline",attrs:{content:"是否确认商品不参与会员折扣？"},on:{confirm:function(s){return t.handleBatchNoParticipate([e.row.id])}}},[s("el-button",{attrs:{slot:"trigger",type:"text",size:"small"},slot:"trigger"},[t._v(" 不参与 ")])],1):t._e()]}}])})],1)],1),s("div",{staticClass:"flex row-right m-t-16 row-right"},[s("ls-pagination",{on:{change:function(e){return t.getMemberPriceList()}},model:{value:t.pager,callback:function(e){t.pager=e},expression:"pager"}})],1)])])}),[],!1,null,null,null);e.default=m.exports}}]);