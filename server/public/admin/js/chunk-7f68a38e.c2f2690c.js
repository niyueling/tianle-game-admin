(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7f68a38e"],{"0836":function(e,t,s){"use strict";s("bc44")},a3ee:function(e,t,s){"use strict";s.r(t);var a=s("9ab4"),i=s("1b40"),r=s("b3ad"),n=s("4201"),l=s("f633");let o=class extends i.e{constructor(){super(...arguments),this.mode=n.f.ADD,this.identity=null,this.isLevel=null,this.disabled=!1,this.form={name:"",rank:0,image:"",background_image:"",remark:"",level_discount:0,discount:10,condition:{condition_type:0,is_single_money:0,is_total_money:0,is_total_num:0,single_money:"",total_money:"",total_num:""}},this.formRules={name:[{required:!0,message:"请输入等级名称",trigger:"blur"}],rank:[{required:!0,message:"请输入等级级别",trigger:"blur"},{type:"number",required:!0,message:"请输入大于1的整数",trigger:"blur"}],level_discount:[{required:!0,message:"请选择等级折扣",trigger:"change"}],"condition.condition_type":[{required:!0,message:"请选择等级条件",trigger:"change"}]}}onSubmit(){this.$refs.formRef.validate(e=>{if(e)switch(this.mode){case n.f.ADD:return this.handleUserLevelAdd();case n.f.EDIT:return this.handleUserLevelEdit()}})}handleUserLevelAdd(){const e=this.form;Object(l.k)(e).then(()=>{setTimeout(()=>this.$router.go(-1),500)}).catch(()=>{})}handleUserLevelEdit(){const e=this.form,t=this.identity;Object(l.n)({...e,id:t}).then(()=>{setTimeout(()=>this.$router.go(-1),500)}).catch(()=>{})}initFormDataForUserLevelEdit(){Object(l.m)({id:this.identity}).then(e=>{Object.keys(e).map(t=>{this.$set(this.form,t,e[t])})}).catch(()=>{})}conditionChange(e,t){e||(this.form.condition[t]="")}created(){const e=this.$route.query;e.mode&&(this.mode=e.mode),this.disabled=null!=this.$route.query.disabled,this.mode===n.f.EDIT&&(this.identity=1*e.id,this.isLevel=1*e.level,this.initFormDataForUserLevelEdit())}};o=Object(a.a)([Object(i.a)({components:{MaterialSelect:r.a}})],o);var d=o,c=(s("0836"),s("2877")),u=Object(c.a)(d,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-grade-edit"},[s("div",{staticClass:"ls-card"},[e.disabled?s("el-page-header",{attrs:{content:"用户等级详情"},on:{back:function(t){return e.$router.go(-1)}}}):s("el-page-header",{attrs:{content:"add"==e.mode?"新增用户等级":"编辑用户等级"},on:{back:function(t){return e.$router.go(-1)}}})],1),s("el-form",{ref:"formRef",attrs:{rules:e.formRules,model:e.form,"label-width":"120px",size:"small"}},[s("div",{staticClass:"ls-card m-t-16"},[s("div",{staticClass:"card-title"},[e._v("等级信息")]),s("div",{staticClass:"card-content m-t-24"},[s("el-form-item",{attrs:{label:"等级名称",prop:"name"}},[s("el-input",{attrs:{disabled:e.disabled,placeholder:"请输入等级名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),s("el-form-item",{attrs:{label:"等级级别",prop:"rank"}},[s("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入等级级别",disabled:"edit"===e.mode&&1===e.isLevel||e.disabled},model:{value:e.form.rank,callback:function(t){e.$set(e.form,"rank",e._n(t))},expression:"form.rank"}}),s("span",{staticClass:"m-l-10"},[e._v("级")]),s("div",{staticClass:"muted xs m-r-16"},[e._v("权重数字越大表示等级越高，等级权重不能相同。填写大于1的整数")])],1),s("el-form-item",{attrs:{label:"等级图标",required:""}},[s("material-select",{attrs:{limit:1,disabled:e.disabled},model:{value:e.form.image,callback:function(t){e.$set(e.form,"image",t)},expression:"form.image"}}),s("div",{staticClass:"flex"},[s("div",{staticClass:"muted xs m-r-16"},[e._v("建议尺寸：100*100像素，jpg，jpeg，png图片类型")])])],1),s("el-form-item",{attrs:{label:"等级背景图",required:""}},[s("material-select",{attrs:{limit:1,disabled:e.disabled},model:{value:e.form.background_image,callback:function(t){e.$set(e.form,"background_image",t)},expression:"form.background_image"}}),s("div",{staticClass:"flex"},[s("div",{staticClass:"muted xs m-r-16"},[e._v("建议尺寸：800*500像素，jpg，jpeg，png图片类型")])])],1),s("el-form-item",{attrs:{label:"等级描述",prop:"remark"}},[s("el-input",{staticClass:"ls-input-textarea",attrs:{disabled:e.disabled,placeholder:"请输入等级描述",type:"textarea",rows:3},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)]),s("div",{staticClass:"ls-card m-t-16"},[s("div",{staticClass:"card-title"},[e._v("等级权益")]),s("div",{staticClass:"card-content m-t-24"},[s("el-form-item",{attrs:{label:"等级折扣",prop:"level_discount"}},[s("div",[s("el-radio",{attrs:{label:0,disabled:e.disabled},model:{value:e.form.level_discount,callback:function(t){e.$set(e.form,"level_discount",t)},expression:"form.level_discount"}},[e._v("无等级折扣")])],1),s("div",[s("el-radio",{attrs:{label:1,disabled:e.disabled},model:{value:e.form.level_discount,callback:function(t){e.$set(e.form,"level_discount",t)},expression:"form.level_discount"}},[s("span",{staticClass:"m-r-5"},[e._v("参与等级折扣")]),s("el-input",{staticClass:"ls-input",attrs:{size:"small",disabled:e.disabled},model:{value:e.form.discount,callback:function(t){e.$set(e.form,"discount",t)},expression:"form.discount"}}),s("span",{staticClass:"m-l-5"},[e._v("折")])],1)],1),s("div",{staticClass:"muted xs m-r-16"},[e._v(" 购买符合条件的商品时，可以使用等级折扣进行优惠。填写0到10之间的数字，可以保留小数点2位数字 ")])])],1)]),"edit"!==e.mode||1!==e.form.rank?s("div",{staticClass:"ls-card m-t-16"},[s("div",{staticClass:"card-title"},[e._v("等级条件")]),s("div",{staticClass:"card-content m-t-24"},[s("el-form-item",{attrs:{label:"等级条件",prop:"condition.condition_type"}},[s("el-radio-group",{staticClass:"m-r-16",attrs:{disabled:e.disabled},model:{value:e.form.condition.condition_type,callback:function(t){e.$set(e.form.condition,"condition_type",t)},expression:"form.condition.condition_type"}},[s("el-radio",{staticClass:"m-r-16",attrs:{label:0}},[e._v("满足以下任意条件")]),s("el-radio",{staticClass:"m-r-16",attrs:{label:1}},[e._v("满足以下全部条件")])],1),s("div",{staticClass:"flex-col"},[s("div",{staticClass:"flex m-t-18"},[s("el-checkbox",{attrs:{"true-label":1,"false-label":0,disabled:e.disabled},on:{change:function(t){return e.conditionChange(t,"single_money")}},model:{value:e.form.condition.is_single_money,callback:function(t){e.$set(e.form.condition,"is_single_money",t)},expression:"form.condition.is_single_money"}},[s("div",{staticClass:"flex"},[s("span",{staticClass:"m-r-5"},[e._v("单笔消费金额")])])]),s("el-input",{staticClass:"ls-input",attrs:{disabled:e.disabled,type:"number"},model:{value:e.form.condition.single_money,callback:function(t){e.$set(e.form.condition,"single_money",t)},expression:"form.condition.single_money"}},[s("template",{slot:"append"},[e._v("元")])],2)],1),s("div",{staticClass:"flex m-t-18"},[s("el-checkbox",{attrs:{disabled:e.disabled,"true-label":1,"false-label":0},on:{change:function(t){return e.conditionChange(t,"total_money")}},model:{value:e.form.condition.is_total_money,callback:function(t){e.$set(e.form.condition,"is_total_money",t)},expression:"form.condition.is_total_money"}},[s("div",{staticClass:"flex"},[s("span",{staticClass:"m-r-5"},[e._v("累计消费金额")])])]),s("el-input",{staticClass:"ls-input",attrs:{disabled:e.disabled,type:"number"},model:{value:e.form.condition.total_money,callback:function(t){e.$set(e.form.condition,"total_money",t)},expression:"form.condition.total_money"}},[s("template",{slot:"append"},[e._v("元")])],2)],1),s("div",{staticClass:"flex m-t-18"},[s("el-checkbox",{attrs:{disabled:e.disabled,"true-label":1,"false-label":0},on:{change:function(t){return e.conditionChange(t,"total_num")}},model:{value:e.form.condition.is_total_num,callback:function(t){e.$set(e.form.condition,"is_total_num",t)},expression:"form.condition.is_total_num"}},[s("div",{staticClass:"flex"},[s("span",{staticClass:"m-r-5"},[e._v("累计消费次数")])])]),s("el-input",{staticClass:"ls-input",attrs:{disabled:e.disabled,type:"number"},model:{value:e.form.condition.total_num,callback:function(t){e.$set(e.form.condition,"total_num",t)},expression:"form.condition.total_num"}},[s("template",{slot:"append"},[e._v("次")])],2)],1)])],1)],1)]):e._e()]),s("div",{staticClass:"bg-white ls-fixed-footer"},[s("div",{staticClass:"row-center flex",staticStyle:{height:"100%"}},[s("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),s("el-button",{attrs:{size:"small",type:"primary",disabled:e.disabled},on:{click:function(t){return e.onSubmit()}}},[e._v("保存")])],1)])],1)}),[],!1,null,"afe279b6",null);t.default=u.exports},bc44:function(e,t,s){},f633:function(e,t,s){"use strict";s.d(t,"o",(function(){return i})),s.d(t,"k",(function(){return r})),s.d(t,"m",(function(){return n})),s.d(t,"n",(function(){return l})),s.d(t,"l",(function(){return o})),s.d(t,"j",(function(){return d})),s.d(t,"f",(function(){return c})),s.d(t,"h",(function(){return u})),s.d(t,"i",(function(){return m})),s.d(t,"g",(function(){return f})),s.d(t,"p",(function(){return b})),s.d(t,"q",(function(){return p})),s.d(t,"b",(function(){return v})),s.d(t,"s",(function(){return _})),s.d(t,"t",(function(){return g})),s.d(t,"u",(function(){return h})),s.d(t,"r",(function(){return C})),s.d(t,"c",(function(){return k})),s.d(t,"d",(function(){return x})),s.d(t,"e",(function(){return y})),s.d(t,"v",(function(){return $})),s.d(t,"a",(function(){return L}));var a=s("f175");const i=e=>a.a.get("/user.user_level/lists",{params:e}),r=e=>a.a.post("/user.user_level/add",e),n=e=>a.a.get("/user.user_level/detail",{params:e}),l=e=>a.a.post("/user.user_level/edit",e),o=e=>a.a.post("/user.user_level/del",e),d=e=>a.a.get("/user.user_label/lists",{params:e}),c=e=>a.a.post("/user.user_label/add",e),u=e=>a.a.get("/user.user_label/detail",{params:e}),m=e=>a.a.post("/user.user_label/edit",e),f=e=>a.a.post("/user.user_label/del",e),b=e=>a.a.get("/user.user/lists",{params:e}),p=()=>a.a.get("/user.user/otherList"),v=e=>a.a.get("/user.user/detail",{params:e}),_=e=>a.a.post("/user.user/setInfo",e),g=e=>a.a.post("/user.user/setLabel",e),h=e=>a.a.post("/user.user/setUserLabel",e),C=e=>a.a.post("/user.user/adjustUserWallet",e),k=()=>a.a.get("/user.user/index"),x=e=>a.a.get("/user.user/info",{params:e}),y=e=>a.a.get("/user.user/userInviterLists",{params:e}),$=e=>a.a.post("/user.user/adjustFirstLeader",e),L=e=>a.a.get("/user.user/selectUserLists",{params:e})}}]);