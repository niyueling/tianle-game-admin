(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-cec716ca"],{"0885":function(t,e,s){},bd1a:function(t,e,s){"use strict";s.r(e);var a=s("9ab4"),i=s("1b40"),o=s("b3ad"),r=s("f7b7"),l=s("6ddb");let n=class extends i.e{constructor(){super(...arguments),this.form={name:"",original_id:"",qr_code:"",app_id:"",app_secret:"",url:"",token:"",encoding_aes_key:"",encryption_type:"",business_domain:"",js_secure_domain:"",web_auth_domain:""},this.rules={app_id:[{required:!0,message:"必填项不能为空",trigger:"blur"}],app_secret:[{required:!0,message:"必填项不能为空",trigger:"blur"}],encryption_type:[{required:!0,message:"必填项不能为空",trigger:"blur"}]}}initFormData(){Object(r.a)().then(t=>{for(const e in t)this.form.hasOwnProperty(e)&&(this.form[e]=t[e])}).catch(()=>{this.$message.error("数据加载失败，请刷新重载")})}onResetFrom(){this.initFormData(),this.$message.info("已重置数据")}onSubmitFrom(t){this.$refs[t].validate(t=>{if(!t)return this.$message.error("请完善信息");const e=this.$loading({text:"保存中"}),s={...this.form};delete s.url,delete s.business_domain,delete s.js_secure_domain,delete s.web_auth_domain,Object(r.b)({...s}).then(()=>{this.$message.success("保存成功")}).catch(()=>{this.$message.error("保存失败")}).finally(()=>{e.close()})})}handleCopy(t){Object(l.b)(t).then(()=>{this.$message.success("复制成功")}).catch(t=>{this.$message.error("复制失败")})}created(){this.initFormData()}};n=Object(a.a)([Object(i.a)({components:{MaterialSelect:o.a}})],n);var c=n,m=(s("f4fd"),s("2877")),d=Object(m.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"channel-mp_wechat-index"},[s("div",{staticClass:"ls-card"},[s("el-alert",{attrs:{title:"温馨提示：请先前往微信公众号后台申请认证微信公众号-服务号。",type:"info",closable:!1,"show-icon":""}})],1),s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px",size:"small"}},[s("div",{staticClass:"ls-card m-t-16"},[s("div",{staticClass:"card-title"},[t._v("微信公众号")]),s("div",{staticClass:"card-content m-t-24"},[s("el-form-item",{attrs:{label:"名称",prop:"name"}},[s("el-input",{staticClass:"ls-input",attrs:{"show-word-limit":""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),s("el-form-item",{attrs:{label:"原始ID",prop:"original_id"}},[s("el-input",{staticClass:"ls-input",attrs:{"show-word-limit":""},model:{value:t.form.original_id,callback:function(e){t.$set(t.form,"original_id",e)},expression:"form.original_id"}})],1),s("el-form-item",{attrs:{label:"二维码",prop:"qr_code"}},[s("material-select",{attrs:{limit:1},model:{value:t.form.qr_code,callback:function(e){t.$set(t.form,"qr_code",e)},expression:"form.qr_code"}}),s("div",{staticClass:"muted xs m-r-16"},[t._v("建议尺寸：宽400px*高400px。jpg，jpeg，png格式")])],1)],1)]),s("div",{staticClass:"ls-card m-t-16"},[s("div",{staticClass:"card-title"},[t._v("公众号开发者信息")]),s("div",{staticClass:"card-content m-t-24"},[s("el-form-item",{attrs:{label:"AppID",prop:"app_id"}},[s("el-input",{staticClass:"ls-input",attrs:{"show-word-limit":""},model:{value:t.form.app_id,callback:function(e){t.$set(t.form,"app_id",e)},expression:"form.app_id"}})],1),s("el-form-item",{attrs:{label:"AppSecret",prop:"app_secret"}},[s("el-input",{staticClass:"ls-input",attrs:{"show-word-limit":""},model:{value:t.form.app_secret,callback:function(e){t.$set(t.form,"app_secret",e)},expression:"form.app_secret"}}),s("div",{staticClass:"muted xs m-r-16"},[t._v(" 登录微信公众平台，点击开发>基本配置>公众号开发信息，设置AppID和AppSecret ")])],1)],1)]),s("div",{staticClass:"ls-card m-t-16"},[s("div",{staticClass:"card-title"},[t._v("服务器配置")]),s("div",{staticClass:"card-content m-t-24"},[s("el-form-item",{attrs:{label:"URL"}},[s("el-input",{staticClass:"ls-input m-r-16",attrs:{"show-word-limit":"",disabled:""},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}}),s("el-button",{on:{click:function(e){return t.handleCopy(t.form.url)}}},[t._v("复制")]),s("div",{staticClass:"muted xs"},[t._v(" 登录微信公众平台，点击开发>基本配置>服务器配置，填写服务器地址（URL） ")])],1),s("el-form-item",{attrs:{label:"Token",prop:"token"}},[s("el-input",{staticClass:"ls-input",attrs:{"show-word-limit":""},model:{value:t.form.token,callback:function(e){t.$set(t.form,"token",e)},expression:"form.token"}}),s("div",{staticClass:"muted xs"},[t._v(" 登录微信公众平台，点击开发>基本配置>服务器配置，设置令牌Token。不填默认为“likeshop” ")])],1),s("el-form-item",{attrs:{label:"EncodingAESKey",prop:"encoding_aes_key"}},[s("el-input",{staticClass:"ls-input",attrs:{"show-word-limit":""},model:{value:t.form.encoding_aes_key,callback:function(e){t.$set(t.form,"encoding_aes_key",e)},expression:"form.encoding_aes_key"}}),s("div",{staticClass:"muted xs"},[t._v("消息加密密钥由43位字符组成，字符范围为A-Z,a-z,0-9")])],1),s("el-form-item",{attrs:{label:"消息加密方式",prop:"encryption_type"}},[s("el-radio-group",{model:{value:t.form.encryption_type,callback:function(e){t.$set(t.form,"encryption_type",e)},expression:"form.encryption_type"}},[s("el-radio",{staticClass:"form__item-encryption",attrs:{label:1}},[t._v("明文模式 (不使用消息体加解密功能，安全系数较低)")]),s("el-radio",{staticClass:"form__item-encryption",attrs:{label:2}},[t._v("兼容模式 (明文、密文将共存，方便开发者调试和维护)")]),s("el-radio",{staticClass:"form__item-encryption",attrs:{label:3}},[t._v("安全模式（推荐） (消息包为纯密文，需要开发者加密和解密，安全系数高)")])],1)],1)],1)]),s("div",{staticClass:"ls-card m-t-16"},[s("div",{staticClass:"card-title"},[t._v("功能设置")]),s("div",{staticClass:"card-content m-t-24"},[s("el-form-item",{attrs:{label:"业务域名"}},[s("el-input",{staticClass:"ls-input m-r-16",attrs:{"show-word-limit":"",disabled:""},model:{value:t.form.business_domain,callback:function(e){t.$set(t.form,"business_domain",e)},expression:"form.business_domain"}}),s("el-button",{staticClass:"m-l-16",on:{click:function(e){return t.handleCopy(t.form.business_domain)}}},[t._v("复制")]),s("div",{staticClass:"muted xs"},[t._v("登录微信公众平台，点击设置>公众号设置>功能设置，填写业务域名")])],1),s("el-form-item",{attrs:{label:"JS接口安全域名"}},[s("el-input",{staticClass:"ls-input m-r-16",attrs:{"show-word-limit":"",disabled:""},model:{value:t.form.js_secure_domain,callback:function(e){t.$set(t.form,"js_secure_domain",e)},expression:"form.js_secure_domain"}}),s("el-button",{staticClass:"m-l-16",on:{click:function(e){return t.handleCopy(t.form.js_secure_domain)}}},[t._v("复制")]),s("div",{staticClass:"muted xs"},[t._v("登录微信公众平台，点击设置>公众号设置>功能设置，填写JS接口安全域名")])],1),s("el-form-item",{attrs:{label:"网页授权域名"}},[s("el-input",{staticClass:"ls-input m-r-16",attrs:{"show-word-limit":"",disabled:""},model:{value:t.form.web_auth_domain,callback:function(e){t.$set(t.form,"web_auth_domain",e)},expression:"form.web_auth_domain"}}),s("el-button",{on:{click:function(e){return t.handleCopy(t.form.web_auth_domain)}}},[t._v("复制")]),s("div",{staticClass:"muted xs"},[t._v("登录微信公众平台，点击设置>公众号设置>功能设置，填写网页授权域名")])],1)],1)])]),s("div",{staticClass:"bg-white ls-fixed-footer"},[s("div",{staticClass:"row-center flex",staticStyle:{height:"100%"}},[s("el-button",{attrs:{size:"small"},on:{click:t.onResetFrom}},[t._v("重置")]),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.onSubmitFrom("form")}}},[t._v("保存")])],1)])],1)}),[],!1,null,"9cd17e8e",null);e.default=d.exports},f4fd:function(t,e,s){"use strict";s("0885")},f7b7:function(t,e,s){"use strict";s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return o})),s.d(e,"c",(function(){return r})),s.d(e,"e",(function(){return l})),s.d(e,"d",(function(){return n})),s.d(e,"f",(function(){return c})),s.d(e,"i",(function(){return m})),s.d(e,"h",(function(){return d})),s.d(e,"g",(function(){return u})),s.d(e,"j",(function(){return f})),s.d(e,"k",(function(){return p}));var a=s("f175");const i=()=>a.a.get("/wechat.official_account_setting/getConfig"),o=t=>a.a.post("/wechat.official_account_setting/setConfig",t),r=()=>a.a.get("/wechat.official_account_menu/detail"),l=t=>a.a.post("/wechat.official_account_menu/save",t),n=t=>a.a.post("/wechat.official_account_menu/saveAndPublish",t),c=t=>a.a.post("/wechat.official_account_reply/add",t),m=t=>a.a.post("/wechat.official_account_reply/edit",t),d=t=>a.a.get("/wechat.official_account_reply/detail",{params:t}),u=t=>a.a.post("/wechat.official_account_reply/delete",t),f=t=>a.a.get("/wechat.official_account_reply/lists",{params:t}),p=t=>a.a.post("/wechat.official_account_reply/status",t)}}]);