(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1e990fd4"],{"63be":function(t,e,i){},"649d":function(t,e,i){"use strict";i("f9d7")},"84f7":function(t,e,i){"use strict";i("63be")},a85b:function(t,e,i){"use strict";i.r(e);var s=i("9ab4"),o=i("1b40"),r=i("e770"),a=i("b3ad"),n=i("a897"),l=i("4201");let c=class extends o.e{constructor(){super(...arguments),this.mode=l.f.ADD,this.categoryList=[],this.form={id:0,name:"",synopsis:"",image:"",content:"",sort:0,status:1},this.rules={name:[{required:!0,message:"请输入标题",trigger:"blur"}],cid:[{required:!0,message:"请选择分类",trigger:"change"}],synopsis:[{required:!0,message:"请输入简介",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]}}onSubmit(t){this.$refs[t].validate(t=>{if(t)switch(this.mode){case l.f.ADD:return this.handleNoticeAdd();case l.f.EDIT:return this.handleNoticeEdit()}})}handleNoticeAdd(){const t=this.form;Object(r.a)(t).then(()=>{setTimeout(()=>this.$router.go(-1),500)})}handleNoticeEdit(){const t=this.form;Object(r.d)(t).then(()=>{setTimeout(()=>this.$router.go(-1),500)})}initFormDataForNoticeEdit(){Object(r.c)({id:this.form.id}).then(t=>{Object.keys(t).map(e=>{this.$set(this.form,e,t[e])})})}created(){const t=this.$route.query;t.mode&&(this.mode=t.mode),this.mode===l.f.EDIT&&(this.form.id=1*t.id,this.initFormDataForNoticeEdit())}};c=Object(s.a)([Object(o.a)({components:{LsEditor:n.a,MaterialSelect:a.a}})],c);var d=c,u=(i("649d"),i("2877")),m=Object(u.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"substance_edit-help"},[i("div",{staticClass:"ls-card"},[i("el-page-header",{attrs:{content:"add"==t.mode?"添加公告":"编辑公告"},on:{back:function(e){return t.$router.go(-1)}}})],1),i("div",{staticClass:"ls-card m-t-16 form-container"},[i("div",{staticClass:"form-left"},[i("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"标题",prop:"name"}},[i("el-input",{staticClass:"ls-input",attrs:{"show-word-limit":"",placeholder:"请输入标题"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"简介",prop:"synopsis"}},[i("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入简介"},model:{value:t.form.synopsis,callback:function(e){t.$set(t.form,"synopsis",e)},expression:"form.synopsis"}})],1),i("el-form-item",{attrs:{label:"排序",prop:"sort"}},[i("el-input",{staticClass:"ls-input",attrs:{type:"number",placeholder:"请输入排序"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),i("el-form-item",{attrs:{label:"封面图",prop:"disable"}},[i("material-select",{attrs:{limit:1},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}})],1),i("el-form-item",{attrs:{label:"状态",prop:"status"}},[i("el-radio",{attrs:{label:1},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[t._v("启用")]),i("el-radio",{attrs:{label:0},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[t._v("关闭")])],1)],1)],1),i("div",{staticClass:"form-right"},[i("el-form",{attrs:{rules:t.rules,"label-width":"120px",size:"small"}},[i("el-form-item",{staticClass:"form-edit",attrs:{label:"内容",prop:"content"}},[i("ls-editor",{model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1)],1)]),i("div",{staticClass:"bg-white ls-fixed-footer"},[i("div",{staticClass:"row-center flex",staticStyle:{height:"100%"}},[i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v("保存")])],1)])])}),[],!1,null,"31b94c31",null);e.default=m.exports},a897:function(t,e,i){"use strict";var s=i("9ab4"),o=i("1b40"),r=i("6fad"),a=i.n(r),n=i("b3ad"),l=i("6ddb"),c=i("d70b");let d=class extends o.e{constructor(){super(...arguments),this.firstData=!0,this.identify=""}get editStyle(){return this.width?{width:this.width+"px"}:{}}valueChange(t){this.firstData&&(this.firstData=!1,this.editor.txt.html(t))}handeleChange(t){t.forEach(t=>{this.editor.cmd.do("insertHTML",`<img src="${t}" style="max-width:100%;"/>`)})}created(){this.identify="editor-"+Object(l.g)(3)}mounted(){this.editor=new a.a("#"+this.identify),this.editor.config.height=this.height,this.editor.config.menus=this.menu,this.editor.config.menuTooltipPosition="down",this.editor.config.showFullScreen=!1,this.editor.config.showLinkImg=!1,this.editor.config.uploadImgShowBase64=!0,this.editor.config.zIndex=1,this.editor.config.uploadImgFromMedia=()=>{this.$refs.materialSelect.showDialog()},this.editor.config.onchange=t=>{this.$emit("input",t)},this.editor.config.uploadVideoServer=c.a.baseURL+"/adminapi/upload/video",this.editor.config.uploadVideoHeaders={token:this.$store.getters.token,version:c.a.version},this.editor.config.uploadVideoName="file",this.editor.config.uploadVideoHooks={fail:(t,e,i)=>{this.$message.error("上传视频失败")},timeout:t=>{this.$message.error("上传视频超时")},customInsert:(t,e)=>{1==e.code?t(e.data.uri):this.$message.error(e.msg)}},this.editor.create()}beforeDestroy(){this.editor.destroy()}};Object(s.a)([Object(o.c)()],d.prototype,"value",void 0),Object(s.a)([Object(o.c)({default:()=>["head","bold","fontSize","fontName","italic","underline","strikeThrough","indent","lineHeight","foreColor","link","list","justify","quote","emoticon","image","video","undo","redo"]})],d.prototype,"menu",void 0),Object(s.a)([Object(o.c)({default:600})],d.prototype,"height",void 0),Object(s.a)([Object(o.c)()],d.prototype,"width",void 0),Object(s.a)([Object(o.f)("value")],d.prototype,"valueChange",null),d=Object(s.a)([Object(o.a)({components:{MaterialSelect:n.a}})],d);var u=d,m=(i("84f7"),i("2877")),h=Object(m.a)(u,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ls-editor"},[e("div",{staticClass:"editor",style:[this.editStyle],attrs:{id:this.identify}}),e("material-select",{ref:"materialSelect",attrs:{limit:null,"hidden-trigger":!0},on:{change:this.handeleChange}})],1)}),[],!1,null,"00c8867e",null);e.a=h.exports},e770:function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"e",(function(){return r})),i.d(e,"d",(function(){return a})),i.d(e,"f",(function(){return n})),i.d(e,"c",(function(){return l})),i.d(e,"b",(function(){return c}));var s=i("f175");const o=t=>s.a.post("/shop_notice.shop_notice/add",t),r=t=>s.a.get("/shop_notice.shop_notice/lists",{params:t}),a=t=>s.a.post("/shop_notice.shop_notice/edit",t),n=t=>s.a.post("/shop_notice.shop_notice/status",t),l=t=>s.a.get("/shop_notice.shop_notice/detail",{params:t}),c=t=>s.a.post("/shop_notice.shop_notice/del",t)},f9d7:function(t,e,i){}}]);